(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{"./bundles/sf-listview.js":function(e,t,i){"use strict";i.r(t);i("./modules/sf-listview.js")},"./modules/sf-listview.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.ListView=function(){"use strict";var e={None:[],SlideLeft:["SlideRightOut","SlideLeftOut","SlideLeftIn","SlideRightIn"],SlideDown:["SlideTopOut","SlideBottomOut","SlideBottomIn","SlideTopIn"],Zoom:["FadeOut","FadeZoomOut","FadeZoomIn","FadeIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},t={None:[],SlideLeft:["SlideLeftOut","SlideRightOut","SlideRightIn","SlideLeftIn"],SlideDown:["SlideBottomOut","SlideTopOut","SlideTopIn","SlideBottomIn"],Zoom:["FadeZoomOut","FadeOut","FadeIn","FadeZoomIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},i="e-active",s="e-focused",n="e-list-item",l="e-has-child",o=function(){function o(e,t,i,s){this.dataSourceLevel=["defaultData_Key"],this.curDSKey="defaultData_Key",this.isWindow=!1,this.liElementDifference=0,this.liElementHeight=0,this.virtualListDifference=0,this.element=e,this.dotNetRef=t,this.showCheckBox=i.ShowCheckBox,this.showHeader=i.ShowHeader,this.enable=i.Enable,this.curUL=e.querySelector("ul"),this.enableVirtualization=i.EnableVirtualization,this.isWindow=i.IsWindow,this.eventLists=s,this.height=i.Height,this.headerTitleInfo=[i.HeaderTitle],this.selectedItems={defaultData_Key:i.SelectedElementIdInfo},this.enableRtl=i.EnableRtl,this.animation=i.Animation,this.element.blazor__instance=this}return o.prototype.initialize=function(){if(this.enableVirtualization){if(this.isWindow)this.dotNetRef.invokeMethodAsync("GetComponenetHeight",window.innerHeight);else if(-1!==this.height.indexOf("%")){var e=this.element.parentElement.getBoundingClientRect().height;this.dotNetRef.invokeMethodAsync("GetComponenetHeight",e/100*parseFloat(this.height))}this.updateLiElementHeight()}this.headerElement=this.element.querySelector(".e-headertext"),this.aniObj=new sf.base.Animation(this.animateOptions),this.wireEvents()},o.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"keydown",this.keyActionHandler,this),sf.base.EventHandler.add(this.element,"click",this.clickHandler,this),sf.base.EventHandler.add(this.element,"mouseover",this.hoverHandler,this),sf.base.EventHandler.add(this.element,"mouseout",this.mouseOutHandleer,this),this.touchModule=new sf.base.Touch(this.element,{swipe:this.swipeActionHandler.bind(this)}),this.enableVirtualization&&(sf.base.EventHandler.add(this.element,"scroll",this.ScrollHandler,this),this.isWindow&&window.addEventListener("scroll",this.ScrollHandler.bind(this)))},o.prototype.swipeActionHandler=function(e){"Right"===e.swipeDirection&&e.velocity>.5&&"touchend"===e.originalEvent.type&&(this.showCheckBox&&this.dataSourceLevel[this.dataSourceLevel.length-1]&&this.uncheckAllItems(),this.back())},o.prototype.showHideItem=function(e,t){if(this.element){var i=this.element.querySelector('[data-uid="'+e.id+'"]');i&&(i.style.display=t)}},o.prototype.enableState=function(e,t){if(this.element){var i=this.element.querySelector('[data-uid="'+e.id+'"]');t?i&&i.classList.remove("e-disabled"):t||i&&i.classList.add("e-disabled")}},o.prototype.ScrollHandler=function(e){var t;if(this.liElementHeight||this.updateLiElementHeight(),(t=this.isWindow?Math.round(e.target.documentElement.scrollTop/this.liElementHeight):Math.round(e.target.scrollTop/this.liElementHeight))-this.liElementDifference>=this.virtualListDifference||t-this.liElementDifference<=-1){var i=this.curUL.querySelector("."+s);i&&(this.focusedElementId=i.getAttribute("data-uid"));var n=this.element.querySelector(".e-list-virtualcontainer");(t-1)*this.liElementHeight<0?n.style.top="0px":n.style.top=(t-2)*this.liElementHeight+"px",this.liElementDifference=t,this.dotNetRef.invokeMethodAsync("VirtualScrolling",t-2)}},o.prototype.updateLiElementHeight=function(){var e=this.element.querySelector(".e-list-virtualcontainer");if(e){this.curUL||(this.curUL=this.element.querySelector("ul"));var t=e.children[0];t&&(this.liElementHeight=t.getBoundingClientRect().height,this.dotNetRef.invokeMethodAsync("UpdateLiElementHeight",this.liElementHeight))}},o.prototype.updateElementDifference=function(e){this.virtualListDifference=e},o.prototype.selectItem=function(e){var t=this.element.querySelector('[data-uid="'+e.id+'"]');this.showCheckBox?this.SetChecked(t,t.querySelector(".e-checkbox-wrapper")):sf.base.isNullOrUndefined(t)?this.removeSelect():this.setSelectLI(t,null)},o.prototype.clickHandler=function(e){var t=e.target,o=t.classList;if(o.contains("e-icon-back")&&!o.contains("e-headertext"))this.back();else{var r=sf.base.closest(t.parentNode,"."+n);if(null===r&&(r=t),!r.classList.contains("e-disabled")&&(this.removeFocus(),this.showCheckBox?e.target.classList.contains("e-frame")?(r.classList.add(s),r.querySelector(".e-check")?this.uncheckItem(r):this.SetChecked(r,r.querySelector(".e-checkbox-wrapper"))):r.classList.contains(l)?(this.removeHover(),this.removeSelect(),this.setSelectLI(r,e)):(r.classList.add(s),r.querySelector(".e-check")?this.uncheckItem(r):this.SetChecked(r,r.querySelector(".e-checkbox-wrapper"))):(this.curUL.querySelector("."+i)&&this.curUL.querySelector("."+i).classList.remove(i),r.classList.contains(l)?this.setSelectLI(r,e):(r.classList.add(i),this.selectedItems[this.curDSKey][0]=r.getAttribute("data-uid"))),this.eventLists.onSelect)){var a=!!r.querySelector(".e-check"),c={ElementId:r.getAttribute("data-uid"),isChecked:a,Key:this.curDSKey,Item:this.getDOMObject("liElement",r),Event:this.getMouseEvtArgs(e)};this.dotNetRef.invokeMethodAsync("TriggerSelectEvent",c)}}},o.prototype.getMouseEvtArgs=function(e){return{altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,shittKey:e.shiftKey,type:e.type}},o.prototype.getDOMObject=function(e,t){if(null!=t){var i=window.sfBlazor.getDomObject(e,t);return{ID:i.id,XPath:i.xPath,DomUUID:i.domUUID,ParentID:this.element.getAttribute("id")}}return null},o.prototype.back=function(){if(this.dataSourceLevel.length>1){for(var e=this.element.querySelectorAll("ul"),t=0;t<e.length;t++)this.dataSourceLevel.length>2?e[t].getAttribute("pid")==this.dataSourceLevel[this.dataSourceLevel.length-2]?(this.switchView(this.curUL,e[t],!0),this.curUL=e[t]):e[t].style.display="none":null==e[t].getAttribute("pid")?(this.switchView(this.curUL,e[t],!0),this.curUL=e[t]):e[t].style.display="none";this.dataSourceLevel.pop(),this.headerTitleInfo.pop(),this.headerElement&&(this.headerElement.innerText=this.headerTitleInfo[this.headerTitleInfo.length-1]),this.curDSKey=this.dataSourceLevel[this.dataSourceLevel.length-1],1==this.dataSourceLevel.length&&(this.element.querySelector(".e-list-header").children[0].style.display="none")}},o.prototype.setHoverLI=function(e){this.element.classList.contains("e-disabled")||e.classList.contains("e-disabled")||e.classList.add("e-hover")},o.prototype.hoverHandler=function(e){var t=sf.base.closest(e.target.parentNode,"."+n);t&&this.setHoverLI(t)},o.prototype.mouseOutHandleer=function(e){this.removeHover()},o.prototype.removeHover=function(){var e=this.element.querySelector(".e-hover");e&&e.classList.remove("e-hover")},o.prototype.removeFocus=function(){for(var e=0,t=this.curUL.querySelectorAll("."+s);e<t.length;e++){t[e].classList.remove(s)}},o.prototype.isValidLI=function(e){return e&&e.classList.contains(n)&&!e.classList.contains("e-list-group-item")&&!e.classList.contains("e-disabled")},o.prototype.removeSelect=function(e){if(sf.base.isNullOrUndefined(e))for(var t=0,s=this.element.querySelectorAll("."+i);t<s.length;t++){var n=s[t];n.setAttribute("aria-selected","false"),n.classList.remove(i)}else e.classList.remove(i),e.setAttribute("aria-selected","false")},o.prototype.setSelectLI=function(e,t){this.isValidLI(e)&&!e.classList.contains(i)&&this.enable&&(this.showCheckBox||this.removeSelect(),e.classList.add(i),e.setAttribute("aria-selected","true"),this.removeHover(),e.classList.contains(l)&&this.renderSubList(e))},o.prototype.renderSubList=function(e){var t=e,n=e.getAttribute("data-uid"),o=this.element.querySelector(".e-list-header");if(e.classList.remove(i),e.classList.add(s),this.showHeader&&o&&(o.children[0].style.display=null),t.classList.contains(l)&&n){if(this.element.querySelector("[pid='"+n+"']"))this.renderChildList(n);else{var r={ElementId:n,Key:this.curDSKey};this.dotNetRef.invokeMethodAsync("ListChildDataSource",r)}this.headerTitleInfo.push(t.innerText.trim()),this.headerElement&&(this.headerElement.innerText=this.headerTitleInfo[this.headerTitleInfo.length-1]),this.dataSourceLevel.push(n),this.curDSKey=n}},o.prototype.renderChildList=function(e,t){var i=this.element.querySelectorAll("ul");i[i.length-1].getAttribute("pid")||i[i.length-1].setAttribute("pid",e);for(var s=0;s<i.length;s++)i[s].getAttribute("pid")==e&&(this.switchView(this.curUL,i[s],!1),this.curUL=i[s],t&&(this.selectedItems[e]=t))},o.prototype.keyActionHandler=function(e){switch(e.keyCode){case 36:this.homeKeyHandler(e);break;case 35:this.homeKeyHandler(e,!0);break;case 40:this.arrowKeyHandler(e);break;case 38:this.arrowKeyHandler(e,!0);break;case 13:this.enterKeyHandler(e);break;case 8:this.showCheckBox&&this.curDSKey&&this.uncheckAllItems(),this.back();break;case 32:this.spaceKeyHandler(e)}},o.prototype.homeKeyHandler=function(e,t){var n=this.curUL.querySelector("."+i),l=this.curUL.querySelector("."+s);n&&(n.removeAttribute("aria-selected"),n.classList.remove(i)),l&&l.classList.remove(s);var o=t?this.curUL.children.length-1:0,r=this.curUL.children[o];r.classList.add(i),r.setAttribute("aria-selected","true"),this.showCheckBox&&r.classList.add(s),this.curUL.children[o]?this.element.setAttribute("aria-activedescendant",this.curUL.children[o].id.toString()):this.element.removeAttribute("aria-activedescendant")},o.prototype.onArrowKeyDown=function(e,t){var o,r;return!sf.base.isNullOrUndefined(this.curUL.querySelector("."+l))||this.showCheckBox?(r=this.curUL.querySelector("."+s)||this.curUL.querySelector("."+i),o=this.getSiblingLI(this.curUL.querySelectorAll("."+n),r,t),sf.base.isNullOrUndefined(o)||(r&&(r.classList.remove(s),this.showCheckBox||r.classList.remove(i)),o.classList.contains(l)||this.showCheckBox?o.classList.add(s):this.setSelectLI(o,e))):(r=this.curUL.querySelector("."+i),o=this.getSiblingLI(this.curUL.querySelectorAll("."+n),r,t),this.setSelectLI(o,e)),o?this.element.setAttribute("aria-activedescendant",o.id.toString()):this.element.removeAttribute("aria-activedescendant"),o},o.prototype.getSiblingLI=function(e,t,i){var s=Array.prototype.slice.call(e),n=s.indexOf(t);return i?s[n-1]:s[n+1]},o.prototype.arrowKeyHandler=function(e,t){if(e.preventDefault(),this.curUL){var i=this.onArrowKeyDown(e,t),s=this.element.getBoundingClientRect().top,n=this.element.getBoundingClientRect().height,l=void 0;if(i){var o=i.getBoundingClientRect().top,r=i.getBoundingClientRect().height;if(t)(l=this.isWindow?o:o-s)<0&&(this.isWindow?window.scroll(0,pageYOffset+l):this.element.scrollTop=this.element.scrollTop+l);else{var a=this.isWindow?window.innerHeight:n;(l=this.isWindow?o+r:o-s+r)>a&&(this.isWindow?window.scroll(0,pageYOffset+(l-a)):this.element.scrollTop=this.element.scrollTop+(l-a))}}}},o.prototype.enterKeyHandler=function(e){if(this.curUL){var t=!!this.curUL.querySelector("."+l),i=this.curUL.querySelector("."+s);t&&i&&(i.classList.remove(s),this.showCheckBox&&(this.removeSelect(),this.removeSelect(i),this.removeHover()),this.setSelectLI(i,e))}},o.prototype.checkAllItems=function(){this.updateCheckBoxState(!0)},o.prototype.uncheckAllItems=function(){this.updateCheckBoxState(!1)},o.prototype.updateCheckBoxState=function(e){if(this.showCheckBox)for(var t=this.curUL.querySelectorAll("li"),i=this.enableVirtualization?this.curUL.querySelector(".e-list-virtualcontainer").childElementCount:this.curUL.childElementCount,s=0;s<i;s++){var n=t[s].querySelector(".e-frame");n&&(e?n.classList.contains("e-check")||this.checkItem(t[s]):n.classList.contains("e-check")&&this.uncheckItem(t[s]))}},o.prototype.checkItem=function(e){this.toggleCheckBox(e,!0)},o.prototype.getCheckdata=function(e,t){var i=this.curUL.querySelector("[data-uid='"+e.id+"']");t?this.checkItem(i):this.uncheckItem(i)},o.prototype.spaceKeyHandler=function(e){if(e.preventDefault(),this.enable&&this.showCheckBox&&this.curUL){var t=this.curUL.querySelector("."+s);!sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(t.querySelector(".e-check"))?this.SetChecked(t,t.querySelector(".e-checkbox-wrapper")):this.uncheckItem(t)}},o.prototype.SetChecked=function(e,t){this.removeFocus(),e.classList.add(s),e.classList.add(i),e.setAttribute("aria-selected","true"),t&&(t.querySelector(".e-frame").classList.add("e-check"),t.setAttribute("aria-checked","true")),-1===this.selectedItems[this.curDSKey].indexOf(e.getAttribute("data-uid"))&&this.selectedItems[this.curDSKey].push(e.getAttribute("data-uid"))},o.prototype.toggleCheckBox=function(e,t){if(this.showCheckBox){var s=e;if(!sf.base.isNullOrUndefined(s)){var n=s.querySelector(".e-frame");t?s.classList.add(i):s.classList.remove(i),s.setAttribute("aria-selected",t?"true":"false"),t?n.classList.add("e-check"):n.classList.remove("e-check"),n.parentElement.setAttribute("aria-checked",t?"true":"false")}}},o.prototype.uncheckItem=function(e){1!==this.selectedItems[this.curDSKey].indexOf(e.getAttribute("data-uid"))&&this.selectedItems[this.curDSKey].splice(this.selectedItems[this.curDSKey].indexOf(e.getAttribute("data-uid")),1),this.toggleCheckBox(e,!1)},o.prototype.AddActiveClass=function(){for(var e=this.curUL.querySelector(".e-list-virtualcontainer").children,t=this.selectedItems[this.curDSKey],n=0;n<e.length;n++)this.showCheckBox?(this.focusedElementId&&(this.focusedElementId==e[n].getAttribute("data-uid")?e[n].classList.add(s):e[n].classList.remove(s)),t.length>0&&(-1!==t.indexOf(e[n].getAttribute("data-uid"))?(e[n].classList.add(i),this.toggleCheckBox(e[n],!0)):(e[n].classList.remove(i),this.toggleCheckBox(e[n],!1)))):t[0]==e[n].getAttribute("data-uid")?e[n].classList.add(i):e[n].classList.remove(i)},o.prototype.getSelectedItems=function(){var e={ElementId:this.selectedItems[this.curDSKey],Key:this.curDSKey};return JSON.stringify(e)},o.prototype.switchView=function(i,s,n){var l=this;if(i&&s){var o=i.style.position,r="hidden"!==this.element.style.overflow?this.element.style.overflow:"";i.style.position="absolute",i.classList.add("e-view");var a=void 0,c=this.animation.duration;if(this.animation.effect)a=this.enableRtl?t[this.animation.effect]:e[this.animation.effect];else{a=e.SlideLeft,n=this.enableRtl,c=0}this.element.style.overflow="hidden",this.aniObj.animate(i,{name:!0===n?a[0]:a[1],duration:c,timingFunction:this.animation.easing,end:function(e){i.style.display="none",l.element.style.overflow=r,i.style.position=o,i.classList.remove("e-view")}}),s.style.display="",this.aniObj.animate(s,{name:!0===n?a[2]:a[3],duration:c,timingFunction:this.animation.easing,end:function(){l.dotNetRef.invokeMethodAsync("triggerActionComplete")}}),this.curUL=s}},o.prototype.setAnimation=function(e){this.animation=e},o.prototype.setSelectedItems=function(e){this.selectedItems={defaultData_Key:e},this.dataSourceLevel=["defaultData_Key"],this.curDSKey="defaultData_Key"},o}();return{initialize:function(e,t,i,s){new o(e,t,i,s),e.blazor__instance.initialize()},renderChildList:function(e,t,i){e.blazor__instance.renderChildList(t,i)},updateElementDifference:function(e,t){e.blazor__instance.updateElementDifference(t)},AddActiveClass:function(e){e.blazor__instance.AddActiveClass()},showHideItem:function(e,t,i){e.blazor__instance.showHideItem(t,i)},enableState:function(e,t,i){e.blazor__instance.enableState(t,i)},back:function(e){e.blazor__instance.back()},checkAllItems:function(e){e.blazor__instance.checkAllItems()},uncheckAllItems:function(e){e.blazor__instance.uncheckAllItems()},getCheckdata:function(e,t,i){e.blazor__instance.getCheckdata(t,i)},selectItem:function(e,t){e.blazor__instance.selectItem(t)},updateLiElementHeight:function(e){e.blazor__instance.updateLiElementHeight()},getSelectedItems:function(e){return e.blazor__instance.getSelectedItems()},setAnimation:function(e,t){e.blazor__instance.setAnimation(t)},setSelectedItems:function(e,t){e.blazor__instance.setSelectedItems(t)}}}()}}]);