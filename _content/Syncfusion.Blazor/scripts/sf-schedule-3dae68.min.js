(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{"./bundles/sf-schedule.js":function(e,t,r){"use strict";r.r(t);r("./modules/sf-schedule.js")},"./modules/sf-schedule.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Schedule=function(){"use strict";var e=function(){function e(e){this.parent=e}return e.prototype.cellMouseDown=function(e){this.isPreventAction(e)||this.parent.onCellMouseDown(e)},e.prototype.cellClick=function(e){this.isPreventAction(e)},e.prototype.cellDblClick=function(e){!this.parent.activeViewOptions.readonly&&this.isPreventAction(e)},e.prototype.isPreventAction=function(e){if(sf.base.closest(e.target,".e-navigate"))return!1;if(sf.base.closest(e.target,".e-appointment-wrapper")&&!sf.base.closest(e.target,".e-more-indicator"))return!0;var t=sf.base.closest(e.target,".e-appointment,.e-resource-group-cells");return!sf.base.isNullOrUndefined(t)||(t=sf.base.closest(e.target,".e-header-cells"),!(!this.parent.isTimelineView()||sf.base.isNullOrUndefined(t)))},e.prototype.destroy=function(){},e}();function t(e,t){var r=new Date(e.getTime());return t=(t-r.getDay()-7)%7,new Date(r.setDate(r.getDate()+t))}function r(e){return new Date(e.getFullYear(),e.getMonth())}function n(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function i(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function o(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTimezoneOffset(),r=e.getTimezoneOffset()-t;return e.getTime()-new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTime()-60*r*1e3}function s(e,t){return e=new Date(""+e),new Date(e.setDate(e.getDate()+t))}function a(e,t){var r,n=(e=new Date(""+e)).getDate();return e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(n,(r=e,new Date(r.getFullYear(),r.getMonth()+1,0).getDate()))),e}var l=null;function p(){if(null!==l)return l;var e,t=sf.base.createElement("div");t.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(t);var r=devicePixelRatio?"1.10"===devicePixelRatio.toFixed(2)||devicePixelRatio<=1?Math.ceil(devicePixelRatio%1):Math.floor(devicePixelRatio%1):0;return e=t.offsetWidth-t.clientWidth-r|0,document.body.removeChild(t),l=e}function c(e){return sf.base.isBlazor()?new Date(+e-6e4*e.getTimezoneOffset()):e}var h,u,d,f,m,g=function(){function e(e){this.parent=e}return e.prototype.serverRenderLayout=function(){},e.prototype.getScrollXIndent=function(e){return e.offsetHeight-e.clientHeight>0?p():0},e.prototype.scrollTopPanel=function(e){this.getDatesHeaderElement().firstElementChild.scrollLeft=e.scrollLeft},e.prototype.scrollHeaderLabels=function(e){for(var t=this.element.querySelector(".e-date-header-wrap table"),r=t.offsetWidth/t.querySelectorAll("colgroup col").length,n=function(t,n){for(var i,o=0,s=0,a=n?e.scrollWidth-e.offsetWidth-e.scrollLeft:e.scrollLeft,l=0,p=t;l<p.length;l++){var c=p[l];if((s+=parseInt(c.getAttribute("colSpan"),10))>Math.floor(a/r)){i=c;break}o+=c.offsetWidth}i.children[0].style[n?"right":"left"]=a-o+"px"},i=0,o=[".e-header-year-cell",".e-header-month-cell",".e-header-week-cell",".e-header-cells"];i<o.length;i++){var s=o[i],a=[].slice.call(this.element.querySelectorAll(s));if(a.length>0){for(var l=0,p=a;l<p.length;l++){p[l].children[0].style[this.parent.options.enableRtl?"right":"left"]=""}n(a,this.parent.options.enableRtl)}}},e.prototype.getHeaderBarHeight=function(e){void 0===e&&(e=!1);var t=2;if(this.parent.uiStateValues.isGroupAdaptive||e){var r=this.parent.element.querySelector(".e-schedule-resource-toolbar");r&&(t+=r.offsetHeight)}return t},e.prototype.getDatesHeaderElement=function(){return this.element.querySelector(".e-date-header-container")},e.prototype.highlightCurrentTime=function(){},e.prototype.startDate=function(){return this.parent.options.currentView,this.renderDates[0]},e.prototype.endDate=function(){return this.parent.options.currentView,s(this.renderDates[this.renderDates.length-1],1)},e.prototype.getStartHour=function(){var e=this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);return sf.base.isNullOrUndefined(e)&&(e=new Date(2e3,0,0,0)),e},e.prototype.getEndHour=function(){var e=this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);return sf.base.isNullOrUndefined(e)&&(e=new Date(2e3,0,0,0)),e},e.prototype.isCurrentDate=function(e){return e.setHours(0,0,0,0)===this.parent.getCurrentTime().setHours(0,0,0,0)},e.prototype.isCurrentMonth=function(e){return e.getFullYear()===this.parent.getCurrentTime().getFullYear()&&e.getMonth()===this.parent.getCurrentTime().getMonth()},e.prototype.isWorkDay=function(e,t){return void 0===t&&(t=this.parent.activeViewOptions.workDays),t.indexOf(e.getDay())>=0},e.prototype.isWorkHour=function(e,t,r,n){return!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(r)&&(t.setMilliseconds(0),r.setMilliseconds(0),!(o(e)<o(t)||o(e)>=o(r)||!this.isWorkDay(e,n)))},e.prototype.getRenderDates=function(e){var r=[];if("Week"===this.parent.options.currentView||"TimelineWeek"===this.parent.options.currentView)for(var n=t(i(this.parent.options.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),o=0,a=7*this.parent.activeViewOptions.interval;o<a;o++)(this.parent.activeViewOptions.showWeekend||this.isWorkDay(n,e))&&r.push(n),n=s(n,1);else if("WorkWeek"===this.parent.options.currentView||"TimelineWorkWeek"===this.parent.options.currentView){n=t(i(this.parent.options.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),o=0;for(var l=7*this.parent.activeViewOptions.interval;o<l;o++)this.isWorkDay(n,e)&&r.push(n),n=s(n,1)}else{n=i(this.parent.options.selectedDate);do{(this.parent.activeViewOptions.showWeekend||this.isWorkDay(n,e))&&r.push(n),n=s(n,1)}while(this.parent.activeViewOptions.interval!==r.length)}return e||(this.renderDates=r),r},e.prototype.getColElements=function(){return[].slice.call(this.element.querySelectorAll(".e-content-wrap col, .e-date-header-wrap col"))},e.prototype.setColWidth=function(e){if(this.parent.isTimelineView()){var t=this.getColElements(),r=this.element.querySelector(".e-content-table tbody"),n=Math.ceil(r.offsetWidth/(t.length/2));if(t.forEach((function(e){return sf.base.setStyleAttribute(e,{width:sf.base.formatUnit(n)})})),e.offsetHeight!==e.clientHeight){var i=this.parent.element.querySelector(".e-resource-column-wrap");sf.base.isNullOrUndefined(i)||sf.base.setStyleAttribute(i,{height:sf.base.formatUnit(e.clientHeight)})}}},e.prototype.resetColWidth=function(){for(var e=0,t=this.getColElements();e<t.length;e++){t[e].style.width=""}},e.prototype.getContentAreaElement=function(){return this.element.querySelector(".e-content-wrap")},e.prototype.scrollToDate=function(e){if(-1!==["Month","TimelineMonth"].indexOf(this.parent.options.currentView)&&!sf.base.isNullOrUndefined(e)){var t=this.getContentAreaElement(),r=this.parent.getMsFromDate(new Date(i(new Date(+e)).getTime())),n=t.querySelector('.e-work-cells[data-date="'+r+'"]');"Month"===this.parent.options.currentView&&n&&(t.scrollTop=n.offsetTop),"TimelineMonth"===this.parent.options.currentView&&n&&(t.scrollLeft=n.offsetLeft)}},e}(),y=(h=function(e,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),v=function(e){function t(t){var r=e.call(this,t)||this;return r.isInverseTableSelect=!0,r.baseCssClass="e-vertical-view",r}return y(t,e),t.prototype.onDataReady=function(){},t.prototype.onContentScroll=function(e){this.parent.removeNewEventElement();var t=e.target;this.parent.onVirtualScroll(),this.scrollLeftPanel(t),this.scrollTopPanel(t),this.parent.isAdaptive||(this.parent.uiStateValues.top=t.scrollTop),this.parent.uiStateValues.left=t.scrollLeft,sf.base.isNullOrUndefined(this.parent.quickPopup)||this.parent.quickPopup.quickPopupHide()},t.prototype.onApaptiveMove=function(e){this.parent.uiStateValues.action&&e.preventDefault()},t.prototype.scrollLeftPanel=function(e){var t=this.getLeftPanelElement();sf.base.isNullOrUndefined(t)||(t.scrollTop=e.scrollTop)},t.prototype.onScrollUiUpdate=function(e){var t=this.getHeaderBarHeight(),r=this.getLeftPanelElement(),n=this.getContentAreaElement(),i=this.getDatesHeaderElement(),o=this.parent.element.offsetHeight-t-i.offsetHeight;this.setColWidth(n),this.setContentHeight(n,r,o);var s=p();i.firstElementChild.style[e.cssProperties.rtlBorder]="",i.style[e.cssProperties.rtlPadding]="",n.offsetWidth-n.clientWidth>0?(i.firstElementChild.style[e.cssProperties.border]=s>0?"1px":"0px",i.style[e.cssProperties.padding]=s>0?s-1+"px":"0px"):(i.firstElementChild.style[e.cssProperties.border]="",i.style[e.cssProperties.padding]=""),e.isPreventScrollUpdate||(this.parent.uiStateValues.isInitial?(this.scrollToWorkHour(),this.parent.uiStateValues.isInitial=!1):(r&&(r.scrollTop=this.parent.uiStateValues.top),n.scrollTop=this.parent.uiStateValues.top,n.scrollLeft=this.parent.uiStateValues.left)),this.parent.activeViewOptions.timeScale.enable&&this.highlightCurrentTime()},t.prototype.setContentHeight=function(e,t,r){sf.base.isNullOrUndefined(t)||(t.style.height="auto"===this.parent.options.height?"auto":sf.base.formatUnit(r-this.getScrollXIndent(e))),e.style.height="auto"===this.parent.options.height?"auto":sf.base.formatUnit(r)},t.prototype.scrollToWorkHour=function(){if(this.parent.options.workHours.highlight){var e=this.element.querySelector(".e-work-hours");e&&(this.getContentAreaElement().scrollTop=e.offsetTop,this.parent.uiStateValues.top=e.offsetTop,this.parent.uiStateValues.left=0)}},t.prototype.scrollToHour=function(e,t){var r=this.parent.getStartEndTime(e);!sf.base.isNullOrUndefined(r)&&sf.base.isNullOrUndefined(t)&&(this.getContentAreaElement().scrollTop=this.getTopFromDateTime(r))},t.prototype.isWorkHourRange=function(e){return this.getStartHour().getTime()<=e.getTime()&&this.getEndHour().getTime()>=e.getTime()},t.prototype.highlightCurrentTime=function(){var e=this;if(!(this.parent.activeViewOptions.headerRows&&this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option)){var t=[].slice.call(this.element.querySelectorAll(".e-current-day"));t.length>0&&sf.base.removeClass(t,"e-current-day");for(var r='.e-date-header[data-date="'+c(new Date((new Date).setHours(0,0,0,0))).getTime().toString()+'"]',n=0,i=t=[].slice.call(this.element.querySelectorAll(r));n<i.length;n++){var o=i[n];sf.base.addClass([o],"e-current-day")}if(this.parent.options.showTimeIndicator&&this.isWorkHourRange(this.parent.getCurrentTime()))if(this.getCurrentTimeIndicatorIndex().length>0)[].slice.call(this.element.querySelectorAll(".e-work-cells")).length>0&&this.changeCurrentTimePosition(),sf.base.isNullOrUndefined(this.currentTimeIndicatorTimer)&&(this.currentTimeIndicatorTimer=window.setInterval((function(){e.changeCurrentTimePosition()}),6e4));else this.clearCurrentTimeIndicatorTimer();else this.clearCurrentTimeIndicatorTimer()}},t.prototype.getCurrentTimeIndicatorIndex=function(){var e=[];if(!sf.base.isNullOrUndefined(this.parent.resourceBase)&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive)for(var t=0,r=0,n=this.parent.resourceBase.lastResourceLevel;r<n.length;r++){var o=n[r];if((a=this.parent.getIndexOfDate(o.renderDates,i(this.parent.getCurrentTime())))>=0){var s=this.parent.activeViewOptions.group.byDate?this.parent.resourceBase.lastResourceLevel.length*a+t:t+a;e.push(s)}t+=this.parent.activeViewOptions.group.byDate?1:o.renderDates.length}else{var a,l=this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0?this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates:this.renderDates;(a=this.parent.getIndexOfDate(l,i(this.parent.getCurrentTime())))>=0&&e.push(a)}return e},t.prototype.clearCurrentTimeIndicatorTimer=function(){sf.base.isNullOrUndefined(this.currentTimeIndicatorTimer)||(window.clearInterval(this.currentTimeIndicatorTimer),this.currentTimeIndicatorTimer=null,this.removeCurrentTimeIndicatorElements())},t.prototype.removeCurrentTimeIndicatorElements=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-previous-timeline,.e-current-timeline,.e-current-time"));e<t.length;e++){var r=t[e];sf.base.remove(r)}},t.prototype.changeCurrentTimePosition=function(){if(!this.parent.isDestroyed){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),t=this.parent.getContentTable().rows[0],r=this.getTopFromDateTime(this.parent.getCurrentTime()),n=sf.base.formatUnit(r),i=Math.floor(r/t.cells[0].offsetHeight);if(!sf.base.isNullOrUndefined(i)&&!isNaN(i)){for(var o=[].slice.call(this.element.querySelectorAll(".e-timeline-wrapper")),s=0,a=e[0];s<a;s++)o[s].appendChild(sf.base.createElement("div",{className:"e-previous-timeline",styles:"top:"+n}));for(var l=0,p=e;l<p.length;l++){o[p[l]].appendChild(sf.base.createElement("div",{className:"e-current-timeline",styles:"top:"+n}))}var c=sf.base.createElement("div",{className:"e-current-time",styles:"top:"+n}),h=this.getLeftPanelElement(),u=[].slice.call(h.querySelectorAll("tr"));i<=u.length&&(sf.base.removeClass(h.querySelectorAll(".e-hide-childs"),"e-hide-childs"),sf.base.addClass([u[i].lastElementChild],"e-hide-childs"),sf.base.prepend([c],h),c.style.top=sf.base.formatUnit(c.offsetTop-c.offsetHeight/2))}}},t.prototype.getTopFromDateTime=function(e){var t=this.getStartHour();return(60*(e.getHours()-t.getHours())+(e.getMinutes()-t.getMinutes()))*this.getWorkCellHeight()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval},t.prototype.getWorkCellHeight=function(){return this.element.querySelector(".e-work-cells").offsetHeight},t.prototype.renderLayout=function(){this.element=this.parent.element.querySelector(".e-table-wrap");for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-header-cells"));e<t.length;e++){var r=t[e];sf.base.EventHandler.clearEvents(r),this.wireMouseEvents(r)}for(var n=0,i=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-all-day-cells"));n<i.length;n++){r=i[n];sf.base.EventHandler.clearEvents(r),this.wireCellEvents(r)}this.parent.virtualScrollModule&&this.parent.virtualScrollModule.setTranslateValue();var o=this.element.querySelector(".e-content-wrap"),s=this.element.querySelector(".e-content-table tbody");sf.base.EventHandler.clearEvents(s),this.wireCellEvents(s),sf.base.EventHandler.clearEvents(o),sf.base.EventHandler.add(o,"scroll",this.onContentScroll,this),sf.base.EventHandler.add(o,sf.base.Browser.touchMoveEvent,this.onApaptiveMove,this),this.parent.setDimensions()},t.prototype.wireCellEvents=function(e){sf.base.EventHandler.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),this.wireMouseEvents(e)},t.prototype.wireMouseEvents=function(e){sf.base.EventHandler.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)},t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-time-cells-wrap")},t.prototype.getEndDateFromStartDate=function(e){var t=6e4*this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,r=new Date(e.getTime());return r.setMilliseconds(r.getMilliseconds()+t),r},t.prototype.destroy=function(){if(this.clearCurrentTimeIndicatorTimer(),this.element){var e=this.getContentAreaElement();e&&sf.base.EventHandler.remove(e,"scroll",this.onContentScroll),this.element=null}},t}(g),w=(u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),b=function(e){function t(t){var r=e.call(this,t)||this;return r.baseCssClass="e-timeline-view",r}return w(t,e),t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-resource-column-wrap")},t.prototype.scrollTopPanel=function(t){e.prototype.scrollTopPanel.call(this,t),this.scrollHeaderLabels(t)},t.prototype.scrollToWorkHour=function(){var e=this.parent.getStartEndTime(this.parent.options.workHours.start),t=this.isWorkDay(this.parent.options.selectedDate)&&this.parent.options.workHours.highlight&&!sf.base.isNullOrUndefined(e)?new Date(+this.parent.options.selectedDate).setHours(e.getHours(),e.getMinutes(),0,0):new Date(+this.parent.options.selectedDate).setHours(0,0,0,0),r='[data-date="'+this.parent.getMsFromDate(new Date(t))+'"]',n=this.element.querySelector(r);n&&(this.getContentAreaElement().scrollLeft=n.offsetLeft)},t.prototype.scrollToHour=function(e,t){var r,n;if(t&&(n=this.parent.getIndexOfDate(this.renderDates,this.parent.resetTime(t)))>=0){var i=e.split(":");2===i.length&&(r=new Date(t.setHours(parseInt(i[0],10),parseInt(i[1],10),0)))}r=sf.base.isNullOrUndefined(t)?this.parent.getStartEndTime(e):r,sf.base.isNullOrUndefined(r)||(this.getContentAreaElement().scrollLeft=sf.base.isNullOrUndefined(t)?this.getLeftFromDateTime(null,r):this.getLeftFromDateTime([n],r))},t.prototype.changeCurrentTimePosition=function(){if(!this.parent.isDestroyed){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),t=this.getLeftFromDateTime(e,this.parent.getCurrentTime()),r=this.element.querySelector(".e-content-table").offsetHeight,n=this.element.querySelector(".e-date-header-wrap");if(this.element.querySelector(".e-content-wrap").appendChild(sf.base.createElement("div",{className:"e-current-timeline",styles:(this.parent.options.enableRtl?"right":"left")+":"+sf.base.formatUnit(t)+"; height:"+sf.base.formatUnit(r)})),this.parent.virtualScrollModule){var i=this.parent.element.querySelector(".e-current-timeline"),o=this.parent.element.querySelector(".e-content-wrap table");sf.base.setStyleAttribute(i,{transform:o.style.transform})}var s=sf.base.createElement("div",{className:"e-current-time"});n.appendChild(s),s.style[this.parent.options.enableRtl?"right":"left"]=sf.base.formatUnit(t-s.offsetWidth/2)}},t.prototype.getLeftFromDateTime=function(e,t){var r=this.getStartHour(),n=this.getEndHour(),i=0,o=60*(t.getHours()-r.getHours())+(t.getMinutes()-r.getMinutes());if(!sf.base.isNullOrUndefined(e)){var s=0===n.getHours()?24:n.getHours();0!==e[0]&&(i=e[0]*(60*(s-r.getHours()))+(n.getMinutes()-r.getMinutes())),o=i+o}return o*this.getWorkCellWidth()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval},t.prototype.getWorkCellWidth=function(){return this.element.querySelector(".e-work-cells").getBoundingClientRect().width},t.prototype.getCurrentTimeIndicatorIndex=function(){var e=[],t=this.parent.getIndexOfDate(this.renderDates,this.parent.resetTime(this.parent.getCurrentTime()));return t>=0&&e.push(t),e},t.prototype.renderEvents=function(){},t}(v),D=(d=function(e,t){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),S=function(e){function o(t){var r=e.call(this,t)||this;return r.dayNameFormat="wide",r.isInverseTableSelect=!1,r.monthDates={},r}return D(o,e),o.prototype.onDataReady=function(e){},o.prototype.onContentScroll=function(e){this.parent.removeNewEventElement(),this.parent.onVirtualScroll(),this.scrollTopPanel(e.target),this.scrollLeftPanel(e.target)},o.prototype.scrollLeftPanel=function(e){var t=this.getLeftPanelElement();t&&(t.scrollTop=e.scrollTop)},o.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-week-number-wrapper")},o.prototype.onScrollUiUpdate=function(e){var t=this.getHeaderBarHeight(),r=this.getDatesHeaderElement(),n=this.getContentAreaElement(),i=this.parent.element.offsetHeight-t-r.offsetHeight,o=this.getLeftPanelElement();this.setContentHeight(n,o,i);var s=p();if(r.firstElementChild.style[e.cssProperties.rtlBorder]="",r.style[e.cssProperties.rtlPadding]="",n.offsetWidth-n.clientWidth>0?(r.firstElementChild.style[e.cssProperties.border]=s>0?"1px":"0px",r.style[e.cssProperties.padding]=s>0?s-1+"px":"0px"):(r.firstElementChild.style[e.cssProperties.border]="",r.style[e.cssProperties.padding]=""),this.setColWidth(n),e.scrollPosition)o&&(o.scrollTop=e.scrollPosition.top),n.scrollTop=e.scrollPosition.top,n.scrollLeft=e.scrollPosition.left;else{var a=document.querySelector('.e-header-cells[data-date="'+this.parent.getMsFromDate(this.parent.options.selectedDate)+'"]');n.scrollLeft=null!==a?a.offsetLeft:0}},o.prototype.setContentHeight=function(e,t,r){e.style.height="auto","Month"===this.parent.options.currentView&&(e.style.height=sf.base.formatUnit(r)),t&&("MonthAgenda"===this.parent.options.currentView&&(r=this.element.querySelector(".e-content-table").offsetHeight),t.style.height="auto",t.style.height=sf.base.formatUnit(r-this.getScrollXIndent(e)))},o.prototype.serverRenderLayout=function(){var e=[].slice.call(this.parent.element.querySelectorAll(".e-current-day"));e.length>0&&sf.base.removeClass(e,"e-current-day");var t=c(new Date((new Date).setHours(0,0,0,0))),r='.e-work-cells[data-date="'+t.getTime().toString()+'"]';if("Month"===this.parent.options.currentView||"MonthAgenda"===this.parent.options.currentView){(e=[].slice.call(this.parent.element.querySelectorAll(".e-current-date"))).length>0&&sf.base.removeClass(e,"e-current-date");for(var n=0,i=l=[].slice.call(this.parent.element.querySelectorAll(r));n<i.length;n++){var o=i[n],s=o.cellIndex,a=[].slice.call(this.parent.element.querySelectorAll(".e-header-cells"))[s];sf.base.addClass([o],"e-current-date"),sf.base.addClass([a],"e-current-day")}}if("TimelineMonth"===this.parent.options.currentView){var l=this.parent.element.querySelector('.e-header-cells[data-date="'+t.getTime().toString()+'"]');sf.base.isNullOrUndefined(l)||sf.base.addClass([l],"e-current-day")}this.element=this.parent.element.querySelector(".e-table-wrap");for(var p=0,h=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-header-cells"));p<h.length;p++){var u=h[p];sf.base.EventHandler.clearEvents(u),this.wireCellEvents(u)}var d=this.element.querySelector(".e-content-table tbody");sf.base.EventHandler.clearEvents(d),this.wireCellEvents(d),this.parent.virtualScrollModule&&this.parent.virtualScrollModule.setTranslateValue();var f=this.element.querySelector(".e-content-wrap");sf.base.EventHandler.clearEvents(f),sf.base.EventHandler.add(f,"scroll",this.onContentScroll,this),this.renderAppointmentContainer(),this.parent.setDimensions()},o.prototype.renderLayout=function(){this.parent.isTimelineView()&&this.parent.resourceBase&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.setRenderedResources(),this.serverRenderLayout()},o.prototype.wireCellEvents=function(e){sf.base.EventHandler.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),sf.base.EventHandler.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)},o.prototype.renderAppointmentContainer=function(){},o.prototype.getMonthStart=function(e){var n=t(r(e),this.parent.activeViewOptions.firstDayOfWeek);return new Date(n.getFullYear(),n.getMonth(),n.getDate())},o.prototype.getMonthEnd=function(e){return s(t(n(a(e,this.parent.activeViewOptions.interval-1)),this.parent.activeViewOptions.firstDayOfWeek),6)},o.prototype.getRenderDates=function(e){var t=[],r=i(this.parent.options.selectedDate),n=this.getMonthStart(r),o=this.getMonthEnd(r);do{(this.parent.activeViewOptions.showWeekend||this.isWorkDay(n,e))&&t.push(n),n=s(n,1)}while(n.getTime()<=o.getTime());return e||(this.renderDates=t),t},o.prototype.getEndDateFromStartDate=function(e){return s(new Date(e.getTime()),1)},o.prototype.destroy=function(){this.parent.isDestroyed||(this.element=null)},o}(g),C=(f=function(e,t){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),T=function(e){function t(t){var r=e.call(this,t)||this;return r.dayNameFormat="narrow",r.agendaDates={},r.monthAgendaDate=new Date(""+t.options.selectedDate),r}return C(t,e),t.prototype.renderAppointmentContainer=function(){this.setEventWrapperHeight()},t.prototype.setEventWrapperHeight=function(){var e=this.getHeaderBarHeight(!0),t=this.getContentAreaElement().firstElementChild,r=this.element.querySelector(".e-date-header-wrap"),n=this.parent.element.offsetHeight-e-r.offsetHeight-t.offsetHeight,i=this.element.querySelector(".e-wrapper-container"),o=this.element.querySelector(".e-appointment-wrap");i.style.height=o.style.height=sf.base.formatUnit(n)},t.prototype.onDataReady=function(e){},t.prototype.onCellClick=function(e){this.monthAgendaDate=new Date(""+e.startTime)},t}(S),E=(m=function(e,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),H=function(e){function t(t){var r=e.call(this,t)||this;return r.isInverseTableSelect=!0,r}return E(t,e),t.prototype.onDataReady=function(e){},t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-resource-column-wrap")},t.prototype.scrollTopPanel=function(t){e.prototype.scrollTopPanel.call(this,t),this.scrollHeaderLabels(t)},t.prototype.setContentHeight=function(e,t,r){t&&(t.style.height=sf.base.formatUnit(r-this.getScrollXIndent(e))),e.style.height=sf.base.formatUnit(r)},t.prototype.getMonthStart=function(e){var t=r(i(e));return new Date(t.getFullYear(),t.getMonth(),t.getDate())},t.prototype.getMonthEnd=function(e){var t=r(i(e));return n(a(new Date(+t),this.parent.activeViewOptions.interval-1))},t}(S),O=function(){function t(e,t,r,n){this.element=e,this.element.blazor__instance=this,this.dotNetRef=n,this.options=t,this.activeViewOptions=r,this.isAdaptive=sf.base.Browser.isDevice,this.uiStateValues={expand:!1,isInitial:!0,left:0,top:0,isGroupAdaptive:!1,isIgnoreOccurrence:!1,groupIndex:0,action:!1,isBlock:!1},this.render()}return t.prototype.render=function(){var t=[],r=[];t.push("e-schedule"),this.options.enableRtl?t.push("e-rtl"):r.push("e-rtl"),this.isAdaptive?t.push("e-device"):r.push("e-device"),this.options.cssClass&&t.concat(this.options.cssClass.split(" ")),sf.base.classList(this.element,t,r),this.setWidth(),this.setHeight(),this.workCellAction=new e(this),this.initializeLayout(this.options.currentView),this.wireEvents()},t.prototype.initializeLayout=function(e){switch(this.activeView&&this.activeView.destroy(),e){case"Day":case"Week":case"WorkWeek":this.activeView=new v(this);break;case"TimelineDay":case"TimelineWorkWeek":case"TimelineWeek":this.activeView=new b(this);break;case"Month":this.activeView=new S(this);break;case"MonthAgenda":this.activeView=new T(this);break;case"TimelineMonth":this.activeView=new H(this)}this.activeView&&(this.activeView.getRenderDates(),this.activeView.renderLayout())},t.prototype.isTimelineView=function(){return-1!==this.options.currentView.indexOf("Timeline")},t.prototype.getMsFromDate=function(e){return new Date(+e-6e4*e.getTimezoneOffset()).getTime()},t.prototype.getStartEndTime=function(e){if(!sf.base.isNullOrUndefined(e)&&""!==e){var t=this.resetTime(this.getCurrentTime()),r=e.split(":");return 2===r.length&&t.setHours(parseInt(r[0],10),parseInt(r[1],10),0),t}return null},t.prototype.resetTime=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},t.prototype.getCurrentTime=function(){return new Date},t.prototype.onCellMouseDown=function(e){this.keyboardInteractionModule&&this.keyboardInteractionModule.onCellMouseDown(e)},t.prototype.getContentTable=function(){return this.element.querySelector(".e-content-table tbody")},t.prototype.getIndexOfDate=function(e,t){return e.map(Number).indexOf(+t)},t.prototype.setWidth=function(){this.element.style.width=sf.base.formatUnit(this.options.width)},t.prototype.setHeight=function(){this.element.style.height=sf.base.formatUnit(this.options.height)},t.prototype.setDimensions=function(){this.setWidth(),this.setHeight();var e={cssProperties:this.getCssProperties()};this.onScrollUiUpdate(e)},t.prototype.getCssProperties=function(){return{border:this.options.enableRtl?"borderLeftWidth":"borderRightWidth",padding:this.options.enableRtl?"paddingLeft":"paddingRight",rtlBorder:this.options.enableRtl?"borderRightWidth":"borderLeftWidth",rtlPadding:this.options.enableRtl?"paddingRight":"paddingLeft"}},t.prototype.onScrollUiUpdate=function(e){this.activeView&&this.activeView.onScrollUiUpdate(e)},t.prototype.onVirtualScroll=function(){this.virtualScrollModule&&this.virtualScrollModule.virtualScrolling()},t.prototype.removeNewEventElement=function(){var e=this.element.querySelector(".e-new-event");sf.base.isNullOrUndefined(e)||sf.base.remove(e)},t.prototype.closeSidebar=function(e){var t=this.element.querySelector(".e-sidebar");sf.base.closest(e.target,".e-icon-menu,.e-sidebar")&&t&&t.classList.contains("e-open")&&e.preventDefault()},t.prototype.closeHeaderPopup=function(e){var t=sf.base.closest(e.target,".e-date-range,.e-header-popup,.e-day,.e-selected"),r=this.element.querySelector(".e-header-popup");sf.base.isNullOrUndefined(t)&&r&&this.headerPopup&&this.headerPopup.hide()},t.prototype.createCalendarPopup=function(){var e=this.element.querySelector(".e-header-popup");e&&!this.headerPopup&&(this.headerPopup=new sf.popups.Popup(e,{actionOnScroll:"hide",targetType:"relative",relateTo:this.isAdaptive?this.element.querySelector(".e-schedule-toolbar"):this.element.querySelector(".e-date-range"),position:{X:"left",Y:"bottom"},enableRtl:this.options.enableRtl}),this.headerPopup.isStringTemplate=!0),this.headerPopup&&(this.headerPopup.element.classList.contains("e-popup-open")?this.headerPopup.hide():this.headerPopup.show())},t.prototype.getTooltipPosition=function(e){var t=this.element.querySelector(".e-schedule-dialog .e-dlg-content"),r=this.element.querySelector("#"+e).getBoundingClientRect(),n=t.getBoundingClientRect(),i={fieldName:"top:"+(r.bottom-n.top+t.scrollTop+9)+"px;left:"+(r.left-n.left+t.scrollLeft+r.width/2)+"px;"};this.dotNetRef.invokeMethodAsync("ShowValidationPopup",i)},t.prototype.wireEvents=function(){sf.base.EventHandler.add(window,"resize",this.onScheduleResize,this),sf.base.EventHandler.add(window,"orientationchange",this.onScheduleResize,this),sf.base.EventHandler.add(document,sf.base.Browser.touchStartEvent,this.onDocumentClick,this)},t.prototype.unwireEvents=function(){sf.base.EventHandler.remove(window,"resize",this.onScheduleResize),sf.base.EventHandler.remove(window,"orientationchange",this.onScheduleResize),sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.onDocumentClick)},t.prototype.onScheduleResize=function(){this.quickPopup&&this.quickPopup.onClosePopup(),"Month"!==this.options.currentView&&this.activeViewOptions.timeScale.enable&&!this.isTimelineView()||this.activeView.resetColWidth()},t.prototype.onDocumentClick=function(e){this.closeHeaderPopup(e),this.closeSidebar(e)},t.prototype.destroy=function(){this.isDestroyed=!0,this.unwireEvents()},t}();return{initialize:function(e,t,r,n){t.selectedDate=new Date(t.selectedDate),new O(e,t,r,n)},createCalendarPopup:function(e){e&&e.blazor__instance&&e.blazor__instance.createCalendarPopup()},exportSave:function(e,t){if(navigator.msSaveBlob){for(var r=window.atob(t),n=new Uint8Array(r.length),i=0;i<r.length;i++)n[i]=r.charCodeAt(i);var o=new Blob([n.buffer],{type:"application/octet-stream"});navigator.msSaveBlob(o,e)}else{var s=document.createElement("a");s.download=e,s.href="data:application/octet-stream;base64,"+t,document.body.appendChild(s),s.click(),document.body.removeChild(s)}},destroy:function(e){e&&e.blazor__instance&&e.blazor__instance.destroy()},validation:function(e,t){e&&e.blazor__instance&&e.blazor__instance.getTooltipPosition(t)}}}()}}]);