(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{"./bundles/listbox.js":function(e,t,s){"use strict";s.r(t);var i=s("../node_modules/@babel/runtime/helpers/typeof.js"),l=s.n(i);window.sf=window.sf||{};sfBlazor.modules.listbox="dropdowns.ListBox",sfBlazor.loadDependencies(sfBlazor.dependencyJson.listbox,(function(){var e,t,s,i,a,o,n,r;sf.dropdowns=sf.base.extend({},sf.dropdowns,(e={},t=function(e,s){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,s)},s=function(e,s){function i(){this.constructor=e}t(e,s),e.prototype=null===s?Object.create(s):(i.prototype=s.prototype,new i)},i=function(e,t,s,i){var a,o=arguments.length,n=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"===("undefined"==typeof Reflect?"undefined":l()(Reflect))&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,s,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(n=(o<3?a(n):o>3?a(t,s,n):a(t,s))||n);return o>3&&n&&Object.defineProperty(t,s,n),n},a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),i([sf.base.Property("Multiple")],t.prototype,"mode",void 0),i([sf.base.Property(!1)],t.prototype,"showCheckbox",void 0),i([sf.base.Property(!1)],t.prototype,"showSelectAll",void 0),i([sf.base.Property("Left")],t.prototype,"checkboxPosition",void 0),t}(sf.base.ChildProperty),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),i([sf.base.Property([])],t.prototype,"items",void 0),i([sf.base.Property("Right")],t.prototype,"position",void 0),t}(sf.base.ChildProperty),n=function(e){function t(t,s){var i=e.call(this,t,s)||this;return i.isValidKey=!1,i.keyDownStatus=!1,i}var l;return s(t,e),l=t,t.prototype.addItem=function(t,s){e.prototype.addItem.call(this,t,s)},t.prototype.render=function(){this.inputString="",this.initLoad=!0,this.isCustomFiltering=!1,this.initialSelectedOptions=this.value,sf.base.isBlazor()&&this.isServerRendered?(this.list=this.element.parentElement,this.liCollections=this.list.querySelectorAll("."+sf.lists.cssClass.li),this.mainList=this.ulElement=this.list.querySelector("ul"),this.setSelection(this.value),this.allowFiltering&&this.setFiltering(),this.initToolbarAndStyles(),this.updateSelectionSettings(),this.wireEvents(),this.initDraggable(),this.initLoad=!1):e.prototype.render.call(this),this.renderComplete()},t.prototype.updateBlazorListData=function(e,t){t?this.mainList=this.ulElement=this.list.querySelector("ul"):this.sortedData=this.jsonData=this.listData=e},t.prototype.initWrapper=function(){var e=this.createElement("select",{className:"e-hidden-select",attrs:{multiple:""}});this.list.classList.add("e-listbox-wrapper"),this.itemTemplate&&this.list.classList.add("e-list-template"),this.list.classList.add("e-wrapper"),"EJS-LISTBOX"===this.element.tagName?(this.element.setAttribute("tabindex","0"),this.initLoad&&this.element.appendChild(this.list)):(this.initLoad&&this.element.parentElement.insertBefore(this.list,this.element),this.list.insertBefore(this.element,this.list.firstChild),this.element.style.display="none"),this.list.insertBefore(e,this.list.firstChild),this.list.getElementsByClassName("e-list-item")[0]&&this.list.getElementsByClassName("e-list-item")[0].classList.remove(sf.dropdowns.dropDownBaseClasses.focus),sf.base.removeClass([this.list],[sf.dropdowns.dropDownBaseClasses.content,sf.dropdowns.dropDownBaseClasses.root]),this.validationAttribute(this.element,e),this.list.setAttribute("role","listbox"),sf.base.attributes(this.list,{role:"listbox","aria-multiselectable":"Multiple"===this.selectionSettings.mode?"true":"false"}),this.updateSelectionSettings()},t.prototype.updateSelectionSettings=function(){if(this.selectionSettings.showCheckbox&&this.selectionSettings.showSelectAll&&this.liCollections.length){var e=new sf.base.L10n(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.showSelectAll=!0,this.selectAllText=e.getConstant("selectAllText"),this.unSelectAllText=e.getConstant("unSelectAllText"),this.popupWrapper=this.list,this.checkBoxSelectionModule.checkAllParent=null,this.notify("selectAll",{})}},t.prototype.initDraggable=function(){var e=this;this.allowDragAndDrop&&new sf.lists.Sortable(this.ulElement,{scope:this.scope,itemClass:"e-list-item",dragStart:this.triggerDragStart.bind(this),drag:this.triggerDrag.bind(this),beforeDrop:this.beforeDragEnd.bind(this),drop:this.dragEnd.bind(this),placeHolder:function(){return e.createElement("span",{className:"e-placeholder"})},helper:function(t){var s=t.sender.cloneNode(!0);return s.style.width=e.getItems()[0].offsetWidth+"px",(e.value&&e.value.length)>1&&e.isSelected(s)&&s.appendChild(e.createElement("span",{className:"e-list-badge",innerHTML:e.value.length+""})),s}})},t.prototype.updateActionCompleteData=function(e,t){this.jsonData.push(t)},t.prototype.initToolbar=function(){var e,t=this.toolbarSettings.position,s=this.element.getAttribute("data-value");if(this.toolbarSettings.items.length){var i=this.createElement("div",{className:"e-listbox-tool",attrs:{role:"toolbar"}}),l=this.createElement("div",{className:"e-listboxtool-wrapper e-"+t.toLowerCase()});this.list.parentElement.insertBefore(l,this.list),l.appendChild("Right"===t?this.list:i),l.appendChild("Right"===t?i:this.list),this.createButtons(i),this.element.id||(this.element.id=sf.base.getUniqueID("e-"+this.getModuleName())),this.scope?document.querySelector(this.scope).setAttribute("data-value",this.element.id):this.updateToolBarState()}e=this.element.getAttribute("data-value"),s&&e&&s!==e?(this.tBListBox=sf.base.getComponent(document.getElementById(s),this.getModuleName()),this.tBListBox.updateToolBarState()):e&&(this.tBListBox=sf.base.getComponent(document.getElementById(e),this.getModuleName()),this.tBListBox.updateToolBarState())},t.prototype.createButtons=function(e){var t,s,i=this,l=new sf.base.L10n(this.getModuleName(),{moveUp:"Move Up",moveDown:"Move Down",moveTo:"Move To",moveFrom:"Move From",moveAllTo:"Move All To",moveAllFrom:"Move All From"},this.locale);this.toolbarSettings.items.forEach((function(a){s=l.getConstant(a),t=i.createElement("button",{attrs:{type:"button","data-value":a,title:s,"aria-label":s}}),e.appendChild(t),new sf.buttons.Button({iconCss:"e-icons e-"+a.toLowerCase()},t).createElement=i.createElement}))},t.prototype.validationAttribute=function(t,s){e.prototype.validationAttribute.call(this,t,s),s.required=t.required,t.required=!1},t.prototype.setHeight=function(){(this.toolbarSettings.items.length?this.list.parentElement:this.list).style.height=sf.base.formatUnit(this.height),this.allowFiltering&&this.height.toString().indexOf("%")<0?sf.base.addClass([this.list],"e-filter-list"):sf.base.removeClass([this.list],"e-filter-list")},t.prototype.setCssClass=function(){var e=this.toolbarSettings.items.length?this.list.parentElement:this.list;this.cssClass&&sf.base.addClass([e],this.cssClass.split(" ")),this.enableRtl&&sf.base.addClass([e],"e-rtl")},t.prototype.setEnable=function(){var e=this.toolbarSettings.items.length?this.list.parentElement:this.list;this.enabled?sf.base.removeClass([e],sf.lists.cssClass.disabled):(sf.base.addClass([e],sf.lists.cssClass.disabled),sf.base.isBlazor()&&this.isServerRendered&&this.toolbarSettings.items.length&&sf.base.removeClass([this.list],sf.lists.cssClass.disabled))},t.prototype.showSpinner=function(){this.spinner||(this.spinner=this.createElement("div",{className:"e-listbox-wrapper"})),this.spinner.style.height=sf.base.formatUnit(this.height),this.element.parentElement.insertBefore(this.spinner,this.element.nextSibling),sf.popups.createSpinner({target:this.spinner},this.createElement),sf.popups.showSpinner(this.spinner)},t.prototype.hideSpinner=function(){this.spinner.querySelector(".e-spinner-pane")&&sf.popups.hideSpinner(this.spinner),this.spinner.parentElement&&sf.base.detach(this.spinner)},t.prototype.onInput=function(){this.keyDownStatus?this.isValidKey=!0:this.isValidKey=!1,this.keyDownStatus=!1,this.refreshClearIcon()},t.prototype.clearText=function(){this.filterInput.value="",this.refreshClearIcon();var e=document.createEvent("KeyboardEvent");this.isValidKey=!0,this.KeyUp(e)},t.prototype.refreshClearIcon=function(){this.filterInput.parentElement.querySelector("."+r.clearIcon)&&(this.filterInput.parentElement.querySelector("."+r.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible")},t.prototype.onActionComplete=function(t,s,i){var l;this.allowFiltering&&(l=this.list.getElementsByClassName("e-filter-parent")[0]),e.prototype.onActionComplete.call(this,t,s,i),this.allowFiltering&&!sf.base.isNullOrUndefined(l)&&this.list.insertBefore(l,this.list.firstElementChild),this.initWrapper(),this.setSelection(),this.initDraggable(),this.mainList=this.ulElement,this.initLoad?(this.jsonData=[],sf.base.extend(this.jsonData,s,[]),this.initToolbarAndStyles(),this.wireEvents(),this.showCheckbox&&this.setCheckboxPosition(),this.allowFiltering&&this.setFiltering()):this.allowFiltering&&this.list.getElementsByClassName("e-input-filter")[0].focus(),this.initLoad=!1},t.prototype.initToolbarAndStyles=function(){this.initToolbar(),this.setCssClass(),this.setEnable(),this.setHeight()},t.prototype.triggerDragStart=function(e){var t,s=this;e=sf.base.extend(this.getDragArgs(e),{dragSelected:!0}),sf.base.Browser.isIos&&(this.list.style.overflow="hidden"),this.trigger("dragStart",e,(function(i){s.allowDragAll=i.dragSelected,s.allowDragAll||(t=s.ulElement.getElementsByClassName("e-list-badge")[0])&&sf.base.detach(t),sf.base.isBlazor()&&e.bindEvents(e.dragElement)}))},t.prototype.triggerDrag=function(e){this.trigger("drag",this.getDragArgs(e));var t=this.getComponent(e.target);if(t&&0===t.listData.length){var s=t.ulElement.getElementsByClassName("e-list-nrt")[0];s&&t.ulElement.removeChild(s)}},t.prototype.beforeDragEnd=function(e){var t=e.droppedElement.getAttribute("data-value");this.value.indexOf(t)>-1?e.items=this.getDataByValues(this.value):e.items=this.getDataByValues([t]),this.trigger("beforeDrop",e)},t.prototype.dragEnd=function(e){var t,s,i,l,a,o,n=this,r=this.getFormattedValue(e.droppedElement.getAttribute("data-value")),c=this.getComponent(e.droppedElement),h=this.getDragArgs({target:e.droppedElement},!0),d={previousData:this.dataSource},p={previousData:c.dataSource},u=sf.base.extend({},h,{target:e.target,source:{previousData:this.dataSource}});if(c!==this){var f=sf.base.extend(d,{currentData:this.listData});u=sf.base.extend(u,{source:f,destination:p})}if(sf.base.Browser.isIos&&(this.list.style.overflow=""),c===this){var m=this.ulElement;t=[].slice.call(this.listData),s=[].slice.call(this.liCollections),i=[].slice.call(this.jsonData),o=[].slice.call(this.sortedData);var g=e.currentIndex,v=e.currentIndex=this.getCurIdx(this,e.currentIndex),y=t.indexOf(this.getDataByValue(r)),b=i.indexOf(this.getDataByValue(r)),C=o.indexOf(this.getDataByValue(r));t.splice(v,0,t.splice(y,1)[0]),i.splice(v,0,i.splice(b,1)[0]),o.splice(g,0,o.splice(C,1)[0]),s.splice(v,0,s.splice(y,1)[0]),this.allowDragAll&&(a=this.value&&Array.prototype.indexOf.call(this.value,r)>-1?this.value:[r]).forEach((function(e){if(e!==r){var l=t.indexOf(n.getDataByValue(e)),a=i.indexOf(n.getDataByValue(e)),c=o.indexOf(n.getDataByValue(e));l>v&&v++,t.splice(v,0,t.splice(l,1)[0]),i.splice(v,0,i.splice(a,1)[0]),o.splice(g,0,o.splice(c,1)[0]),s.splice(v,0,s.splice(l,1)[0]),m.insertBefore(n.getItems()[n.getIndexByValue(e)],m.getElementsByClassName("e-placeholder")[0])}})),this.listData=t,this.jsonData=i,this.sortedData=o,this.liCollections=s}else{var S,E=[].slice.call(this.liCollections),D=e.currentIndex=this.getCurIdx(c,e.currentIndex),x=c.ulElement;t=[].slice.call(c.listData),s=[].slice.call(c.liCollections),i=[].slice.call(c.jsonData),o=[].slice.call(c.sortedData),a=this.value&&Array.prototype.indexOf.call(this.value,r)>-1&&this.allowDragAll?this.value:[r];var B=[].slice.call(this.listData),A=[].slice.call(this.sortedData);if(a.forEach((function(a){l=n.getDataByValue(a);var c=n.listData.indexOf(l),h=n.jsonData.indexOf(l),d=n.sortedData.indexOf(l);B.splice(c,1),n.jsonData.splice(h,1),A.splice(d,1),n.listData=B,n.sortedData=A;var p=E.splice(c,1)[0],u=a===r?e.currentIndex:D;if(t.splice(u,0,l),i.splice(u,0,l),s.splice(u,0,p),o.splice(u,0,l),a)S=n.getItems()[n.getIndexByValue(a)];else for(var f=n.getItems(),m=0;m<f.length;m++)if(null===f[m].getAttribute("data-value")&&f[m].classList.contains("e-list-item")){S=f[m];break}n.removeSelected(n,a===r?[e.droppedElement]:[S]),x.insertBefore(S,x.getElementsByClassName("e-placeholder")[0]),D++})),this.updateSelectedOptions(),this.fields.groupBy&&(this.ulElement.innerHTML=this.renderItems(this.listData,this.fields).innerHTML,this.setSelection()),"None"!==c.sortOrder||this.selectionSettings.showCheckbox!==c.selectionSettings.showCheckbox||c.fields.groupBy){var w=sf.base.getComponent(x,"sortable");x.innerHTML=c.renderItems(t,c.fields).innerHTML,w.placeHolderElement&&x.appendChild(w.placeHolderElement),x.appendChild(e.helper),c.setSelection()}this.liCollections=E,c.liCollections=s,c.jsonData=sf.base.extend([],[],i,!1),c.listData=sf.base.extend([],[],t,!1),c.sortedData=sf.base.extend([],[],o,!1),0===this.listData.length&&this.l10nUpdate()}if(this===c)f=sf.base.extend(d,{currentData:t}),u=sf.base.extend(u,{source:f});else{var k=sf.base.extend(p,{currentData:t});u=sf.base.extend(u,{destination:k})}this.trigger("drop",u)},t.prototype.removeSelected=function(e,t){e.selectionSettings.showCheckbox?t.forEach((function(e){e.getElementsByClassName("e-frame")[0].classList.remove("e-check")})):sf.base.removeClass(t,sf.lists.cssClass.selected)},t.prototype.getCurIdx=function(e,t){return e.fields.groupBy&&(t-=[].slice.call(e.ulElement.children).slice(0,t).filter((function(e){return e.classList.contains(sf.lists.cssClass.group)})).length),t},t.prototype.getComponent=function(e){var t,s="EJS-LISTBOX"===this.element.tagName?sf.base.closest(e,".e-listbox"):sf.base.closest(e,".e-listbox-wrapper")&&sf.base.closest(e,".e-listbox-wrapper").querySelector(".e-listbox");return s&&(t=sf.base.getComponent(s,this.getModuleName())),t},t.prototype.listOption=function(t,s){return this.listCurrentOptions=e.prototype.listOption.call(this,t,s),this.listCurrentOptions=sf.base.extend({},this.listCurrentOptions,{itemCreated:this.triggerBeforeItemRender.bind(this)},!0),this.notify("listoption",{module:"CheckBoxSelection"}),this.listCurrentOptions},t.prototype.triggerBeforeItemRender=function(e){e.item.setAttribute("tabindex","-1"),this.trigger("beforeItemRender",{element:e.item,item:e.curData})},t.prototype.requiredModules=function(){var e=[];return this.selectionSettings.showCheckbox&&e.push({member:"CheckBoxSelection",args:[this]}),e},t.prototype.enableItems=function(e,t){var s,i=this;void 0===t&&(t=!0),e.forEach((function(e){s=i.findListElement(i.list,"li","data-value",i.getValueByText(e)),t?(sf.base.removeClass([s],sf.lists.cssClass.disabled),s.removeAttribute("aria-disabled")):(sf.base.addClass([s],sf.lists.cssClass.disabled),s.setAttribute("aria-disabled","true"))}))},t.prototype.selectItems=function(e,t){void 0===t&&(t=!0),this.setSelection(e,t,!0),this.updateSelectedOptions()},t.prototype.selectAll=function(e){void 0===e&&(e=!0),this.selectAllItems(e)},t.prototype.addItems=function(t,s){e.prototype.addItem.call(this,t,s)},t.prototype.removeItems=function(e,t){this.removeItem(e,t)},t.prototype.removeItem=function(e,t){var s=[],i=this.list.querySelectorAll("."+sf.dropdowns.dropDownBaseClasses.li);if(e){e=e instanceof Array?e:[e];var l=this.fields,a=void 0,o=[],n=void 0;sf.base.extend(o,[],this.listData);for(var r=[],c=[],h=0;h<e.length;h++){a=e[h]instanceof Object?sf.base.getValue(l.value,e[h]):e[h].toString();for(var d=0,p=o.length;d<p;d++)(o[d]instanceof Object?sf.base.getValue(l.value,o[d]):o[d].toString())===a&&(n=this.getIndexByValue(a),s.push(i[n]),r.push(d),c.push(n))}for(var u=r.length-1;u>0;u--)this.listData.splice(r[u],1);for(u=c.length-1;u>0;u--)this.liCollections.splice(c[u],1)}else t=t||0,s.push(i[t]),this.listData.splice(t,1),this.updateLiCollection(t);for(d=0;d<s.length;d++)this.ulElement.removeChild(s[d]);0===this.listData.length&&this.l10nUpdate()},t.prototype.getDataByValues=function(e){for(var t=[],s=0;s<e.length;s++)t.push(this.getDataByValue(e[s]));return t},t.prototype.moveUp=function(e){var t=e?this.getElemByValue(e):this.getSelectedItems();this.moveUpDown(!0,!1,t)},t.prototype.moveDown=function(e){var t=e?this.getElemByValue(e):this.getSelectedItems();this.moveUpDown(!1,!1,t)},t.prototype.moveTo=function(e,t,s){var i=e?this.getElemByValue(e):this.getSelectedItems(),a=s?sf.base.getComponent(s,l):this.getScopedListBox();this.moveData(this,a,!1,i,t)},t.prototype.moveAllTo=function(e,t){var s=e?sf.base.getComponent(e,l):this.getScopedListBox();this.moveAllData(this,s,!1,t)},t.prototype.getDataList=function(){return this.jsonData},t.prototype.getSortedList=function(){var e,t;if(e=t=this.sortedData,this.fields.groupBy){e=[];for(var s=0;s<t.length;s++)t[s].isHeader||e.push(t[s])}return e},t.prototype.getElemByValue=function(e){for(var t=[],s=0;s<e.length;s++)t.push(this.ulElement.querySelector('[data-value ="'+e[s]+'"]'));return t},t.prototype.updateLiCollection=function(e){var t=[].slice.call(this.liCollections);t.splice(e,1),this.liCollections=t},t.prototype.selectAllItems=function(e,t){var s=this;if([].slice.call(this.getItems()).forEach((function(t){if(!t.classList.contains(sf.lists.cssClass.disabled))if(s.selectionSettings.showCheckbox){var i=t.getElementsByClassName("e-check")[0];(!i&&e||i&&!e)&&(s.notify("updatelist",{li:t,module:"listbox"}),s.maximumSelectionLength>=s.list.querySelectorAll(".e-list-item span.e-check").length&&s.checkMaxSelection())}else e?t.classList.add(sf.lists.cssClass.selected):t.classList.remove(sf.lists.cssClass.selected)})),this.updateSelectedOptions(),this.allowFiltering&&this.selectionSettings.showCheckbox){var i=this.list.getElementsByTagName("li"),l=0;if(e){var a=function(){var e=o.getFormattedValue(i[l].getAttribute("data-value"));o.value.some((function(t){return t===e}))||o.value.push(o.getFormattedValue(i[l].getAttribute("data-value")))},o=this;for(l=0;l<i.length;l++)a()}else{var n=function(){var e=r.getFormattedValue(i[l].getAttribute("data-value"));r.value=r.value.filter((function(t){return t!==e}))},r=this;for(l=0;l<i.length;l++)n()}document.querySelectorAll("ul").length<2&&this.updateMainList()}this.triggerChange(this.getSelectedItems(),t)},t.prototype.updateMainList=function(){var e=this.mainList.querySelectorAll(".e-list-item"),t=this.ulElement.querySelectorAll(".e-list-item"),s=e.length,i=t.length;if(this.selectionSettings.showCheckbox||document.querySelectorAll("ul").length>1||s!==i)for(var l=0,a=0,o=0;l<s;){if(this.value)for(;a<this.value.length;a++)e[l].getAttribute("data-value")===this.value[a]&&o++;!o&&this.selectionSettings.showCheckbox&&e[l].getElementsByClassName("e-frame")[0].classList.remove("e-check"),document.querySelectorAll("ul").length>1&&o&&s!==i?(this.mainList.removeChild(this.mainList.getElementsByTagName("li")[l]),l=0):l++,o=0,a=0}},t.prototype.wireEvents=function(){var e=sf.base.closest(this.element,"form"),t="EJS-LISTBOX"===this.element.tagName?this.element:this.list;sf.base.EventHandler.add(this.list,"click",this.clickHandler,this),sf.base.EventHandler.add(t,"keydown",this.keyDownHandler,this),sf.base.EventHandler.add(t,"focusout",this.focusOutHandler,this),this.wireToolbarEvent(),this.selectionSettings.showCheckbox&&sf.base.EventHandler.remove(document,"mousedown",this.checkBoxSelectionModule.onDocumentClick),(this.fields.groupBy||this.element.querySelector("select>optgroup"))&&sf.base.EventHandler.remove(this.list,"scroll",this.setFloatingHeader),e&&sf.base.EventHandler.add(e,"reset",this.formResetHandler,this)},t.prototype.wireToolbarEvent=function(){this.toolbarSettings.items.length&&sf.base.EventHandler.add(this.getToolElem(),"click",this.toolbarClickHandler,this)},t.prototype.unwireEvents=function(){var e=sf.base.closest(this.element,"form"),t="EJS-LISTBOX"===this.element.tagName?this.element:this.list;sf.base.EventHandler.remove(this.list,"click",this.clickHandler),sf.base.EventHandler.remove(t,"keydown",this.keyDownHandler),sf.base.EventHandler.remove(t,"focusout",this.focusOutHandler),this.allowFiltering&&sf.base.EventHandler.remove(this.clearFilterIconElem,"click",this.clearText),this.toolbarSettings.items.length&&sf.base.EventHandler.remove(this.getToolElem(),"click",this.toolbarClickHandler),e&&sf.base.EventHandler.remove(e,"reset",this.formResetHandler)},t.prototype.clickHandler=function(e){this.selectHandler(e)},t.prototype.checkSelectAll=function(){for(var e=0,t=this.list.querySelectorAll("li."+sf.dropdowns.dropDownBaseClasses.li),s=0;s<t.length;s++)t[s].classList.contains("e-disabled")||e++;var i=this.getSelectedItems().length;this.showSelectAll&&e&&this.notify("checkSelectAll",{module:"CheckBoxSelection",value:e===i?"check":0===i?"uncheck":"indeterminate"})},t.prototype.getQuery=function(e){var t=e?e.clone():this.query?this.query.clone():new sf.data.Query;if(this.allowFiltering){var s=""===this.inputString?"contains":this.filterType,i=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof sf.data.DataManager||"string"!==i)&&"number"!==i){var l=this.fields.text?this.fields.text:"";t.where(l,s,this.inputString,this.ignoreCase,this.ignoreAccent)}else t.where("",s,this.inputString,this.ignoreCase,this.ignoreAccent)}else t=e||(this.query?this.query:new sf.data.Query);return t},t.prototype.setFiltering=function(){var e;if(sf.base.isNullOrUndefined(this.filterParent))return sf.base.isBlazor()&&this.isServerRendered?(this.filterParent=this.list.querySelector(".e-filter-parent"),this.filterInput=this.list.querySelector(".e-input-filter")):(this.filterParent=this.createElement("span",{className:r.filterParent}),this.filterInput=this.createElement("input",{attrs:{type:"text"},className:r.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element),sf.base.Browser.isDevice,e=sf.inputs.Input.createInput({element:this.filterInput,buttons:[r.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),sf.base.append([e.container],this.filterParent),sf.base.prepend([this.filterParent],this.list),sf.base.attributes(this.filterInput,{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-activedescendant":null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"})),this.height.toString().indexOf("%")<0&&sf.base.addClass([this.list],"e-filter-list"),this.inputString=this.filterInput.value,this.clearFilterIconElem=this.filterInput.parentElement.querySelector("."+r.clearIcon),this.clearFilterIconElem&&(sf.base.EventHandler.add(this.clearFilterIconElem,"click",this.clearText,this),this.clearFilterIconElem.style.visibility="hidden"),sf.base.EventHandler.add(this.filterInput,"input",this.onInput,this),sf.base.EventHandler.add(this.filterInput,"keyup",this.KeyUp,this),sf.base.EventHandler.add(this.filterInput,"keydown",this.onKeyDown,this),e},t.prototype.selectHandler=function(e,t){var s,i=!0,l=sf.base.closest(e.target,".e-list-item"),a=[l];if(l){if(s=[].slice.call(l.parentElement.children).indexOf(l),this.selectionSettings.showCheckbox?i=!l.getElementsByClassName("e-frame")[0].classList.contains("e-check"):(e.ctrlKey||sf.base.Browser.isDevice)&&this.isSelected(l)?(l.classList.remove(sf.lists.cssClass.selected),l.removeAttribute("aria-selected"),i=!1):"Multiple"===this.selectionSettings.mode&&(e.ctrlKey||sf.base.Browser.isDevice)||(this.getSelectedItems().forEach((function(e){e.removeAttribute("aria-selected")})),sf.base.removeClass(this.getSelectedItems(),sf.lists.cssClass.selected)),e.shiftKey&&!this.selectionSettings.showCheckbox&&"Single"!==this.selectionSettings.mode?a=[].slice.call(l.parentElement.children).slice(Math.min(s,this.prevSelIdx),Math.max(s,this.prevSelIdx)+1).filter((function(e){return e.classList.contains("e-list-item")})):this.prevSelIdx=[].slice.call(l.parentElement.children).indexOf(l),i&&(this.selectionSettings.showCheckbox||sf.base.addClass(a,sf.lists.cssClass.selected),a.forEach((function(e){e.setAttribute("aria-selected","true")})),this.list.setAttribute("aria-activedescendant",l.id)),t||!(this.maximumSelectionLength>(this.value&&this.value.length))&&i||!(this.maximumSelectionLength>=(this.value&&this.value.length))&&i||this.maximumSelectionLength<(this.value&&this.value.length)||this.notify("updatelist",{li:l,e:e,module:"listbox"}),this.allowFiltering&&!t){var o=this.getFormattedValue(l.getAttribute("data-value"));if(i){var n=[];sf.base.extend(n,this.value),n.push(o),this.value=n}else this.value=this.value.filter((function(e){return e!==o}));document.querySelectorAll("ul").length<2&&this.updateMainList()}this.updateSelectedOptions(),this.triggerChange(this.getSelectedItems(),e),this.checkMaxSelection()}},t.prototype.triggerChange=function(e,t){this.trigger("change",{elements:e,items:this.getDataByElements(e),value:this.value,event:t})},t.prototype.getDataByElems=function(e){for(var t=[],s=0,i=e.length;s<i;s++)t.push(this.getDataByValue(this.getFormattedValue(e[s].getAttribute("data-value"))));return t},t.prototype.getDataByElements=function(e){var t,s=[],i=0;if(!sf.base.isNullOrUndefined(this.listData)){var l=this.typeOfData(this.listData).typeof;if("string"===l||"number"===l||"boolean"===l)for(var a=0,o=this.listData;a<o.length;a++){for(var n=o[a],r=i,c=e.length;r<c;r++)if(t=this.getFormattedValue(e[r].getAttribute("data-value")),!sf.base.isNullOrUndefined(n)&&n===t){i=r,s.push(n);break}if(e.length===s.length)break}else for(var h=0,d=this.listData;h<d.length;h++){for(n=d[h],r=i,c=e.length;r<c;r++)if(t=this.getFormattedValue(e[r].getAttribute("data-value")),!sf.base.isNullOrUndefined(n)&&sf.base.getValue(this.fields.value?this.fields.value:"value",n)===t){i=r,s.push(n);break}if(e.length===s.length)break}return s}return null},t.prototype.checkMaxSelection=function(){var e=this.list.querySelectorAll(".e-list-item span.e-check").length;if(this.selectionSettings.showCheckbox){var t=0,s=void 0;for(s=this.list.getElementsByClassName("e-list-item");t<s.length;t++)s[t].querySelector(".e-frame.e-check")||(e===this.maximumSelectionLength?s[t].classList.add("e-disable"):s[t].classList.contains("e-disable")&&s[t].classList.remove("e-disable"))}},t.prototype.toolbarClickHandler=function(e){var t=sf.base.closest(e.target,"button");if(t){if(this.toolbarAction=t.getAttribute("data-value"),t.disabled)return;switch(this.toolbarAction){case"moveUp":this.moveUpDown(!0);break;case"moveDown":this.moveUpDown();break;case"moveTo":this.moveItemTo();break;case"moveFrom":this.moveItemFrom();break;case"moveAllTo":this.moveAllItemTo();break;case"moveAllFrom":this.moveAllItemFrom()}}},t.prototype.moveUpDown=function(e,t,s){var i,l=this,a=this.getSelectedItems();if(s&&(a=s),!(e&&this.isSelected(this.ulElement.firstElementChild)||!e&&this.isSelected(this.ulElement.lastElementChild))||s){var o={cancel:!1,items:i=this.getDataByElems(a),eventName:this.toolbarAction};this.trigger("actionBegin",o),o.cancel||((e?a:a.reverse()).forEach((function(t){var s=Array.prototype.indexOf.call(l.ulElement.querySelectorAll(".e-list-item"),t),i=Array.prototype.indexOf.call(l.ulElement.children,t);sf.lists.moveTo(l.ulElement,l.ulElement,[i],e?i-1:i+2),l.changeData(i,e?i-1:i+1,e?s-1:s+1,t)})),this.trigger("actionComplete",{items:i,eventName:this.toolbarAction}),a[0].focus(),!t&&this.toolbarSettings.items.length&&this.getToolElem().querySelector("[data-value="+(e?"moveUp":"moveDown")+"]").focus(),this.updateToolBarState())}},t.prototype.moveItemTo=function(){this.moveData(this,this.getScopedListBox())},t.prototype.moveItemFrom=function(){this.moveData(this.getScopedListBox(),this)},t.prototype.moveData=function(e,t,s,i,l){var a=[],o=[],n=[],r=[],c=[].slice.call(e.listData),h=[].slice.call(t.listData),d=[].slice.call(e.sortedData),p=[].slice.call(t.sortedData),u=[].slice.call(e.liCollections),f=[],m=[].slice.call(t.liCollections),g=[],v=[],y=e.getSelectedItems();i&&(y=i);var b="None"!==t.sortOrder||t.selectionSettings.showCheckbox!==e.selectionSettings.showCheckbox||t.fields.groupBy;if(e.value=[],y.length){this.removeSelected(e,y),y.forEach((function(t,s){a.push(Array.prototype.indexOf.call(e.ulElement.children,t)),f.push(Array.prototype.indexOf.call(e.ulElement.querySelectorAll(".e-list-item"),t)),o.push(Array.prototype.indexOf.call(e.listData,e.getDataByElems([t])[0])),r.push(Array.prototype.indexOf.call(e.sortedData,e.getDataByElems([t])[0])),n.push(Array.prototype.indexOf.call(e.jsonData,e.getDataByElems([t])[0]))})),"None"!==this.sortOrder?r.forEach((function(t){g.push(e.sortedData[t])})):n.forEach((function(t){g.push(e.jsonData[t])}));var C={cancel:!1,items:g,eventName:this.toolbarAction};if(e.trigger("actionBegin",C),C.cancel)return;var S=[];if(f.sort((function(e,t){return e-t})).reverse().forEach((function(e){S.push(u.splice(e,1)[0])})),e.liCollections=u,l){var E=m.splice(0,l);t.liCollections=E.concat(S.reverse()).concat(m)}else t.liCollections=m.concat(S.reverse());if(0===t.listData.length){var D=t.ulElement.getElementsByClassName("e-list-nrt")[0];D&&t.ulElement.removeChild(D)}o.sort((function(e,t){return t-e})).forEach((function(e){c.splice(e,1)[0]})),r.sort((function(e,t){return t-e})).forEach((function(e){d.splice(e,1)[0]})),n.slice().reverse().forEach((function(t){v.push(e.jsonData.splice(t,1)[0])})),b?e.fields.groupBy?e.ulElement.innerHTML=e.renderItems(c,e.fields).innerHTML:y.forEach((function(e){sf.base.detach(e)})):(sf.lists.moveTo(e.ulElement,t.ulElement,a,l),this.trigger("actionComplete",{items:g,eventName:this.toolbarAction})),t.mainList.childElementCount!==t.jsonData.length&&(t.mainList=t.ulElement),e.updateMainList();var x=e.ulElement.querySelectorAll(".e-list-item").length,B=void 0,A=void 0,w=[].slice.call(t.jsonData);if(p=[].slice.call(t.sortedData),1===y.length&&x&&!e.selectionSettings.showCheckbox){A=x<=f[0]?x-1:f[0],B=e.ulElement.querySelectorAll(".e-list-item")[A];var k=e.getValidIndex(B,A,x===o[0]?38:40);k>-1&&e.ulElement.querySelectorAll(".e-list-item")[k].classList.add(sf.lists.cssClass.selected)}s&&this.list.focus(),e.listData=c,e.sortedData=d,l=l||h.length;for(var I=g.length-1;I>=0;I--)h.splice(l,0,g[I]),w.splice(l,0,g[I]),p.splice(l,0,g[I]);t.listData=h,t.jsonData=w,t.sortedData=p,b&&(t.ulElement.innerHTML=t.renderItems(h,t.fields).innerHTML,t.setSelection()),e.updateSelectedOptions(),0===e.listData.length&&e.l10nUpdate()}1===e.value.length&&e.getSelectedItems().length&&(e.value[0]=e.getFormattedValue(e.getSelectedItems()[0].getAttribute("data-value")))},t.prototype.moveAllItemTo=function(){this.moveAllData(this,this.getScopedListBox())},t.prototype.moveAllItemFrom=function(){this.moveAllData(this.getScopedListBox(),this)},t.prototype.moveAllData=function(e,t,s,i){var l=[].slice.call(t.listData),a=[].slice.call(t.jsonData),o="None"!==t.sortOrder||t.selectionSettings.showCheckbox!==e.selectionSettings.showCheckbox||t.fields.groupBy;this.removeSelected(e,e.getSelectedItems());var n=[].slice.call(e.jsonData),r={cancel:!1,items:n,eventName:this.toolbarAction};if(e.trigger("actionBegin",r),!r.cancel){var c;0===t.listData.length&&(c=t.ulElement.getElementsByClassName("e-list-nrt")[0])&&t.ulElement.removeChild(c),o?(c=e.ulElement.getElementsByClassName("e-list-nrt")[0])&&e.ulElement.removeChild(c):(sf.lists.moveTo(e.ulElement,t.ulElement,Array.apply(null,{length:e.ulElement.childElementCount}).map(Number.call,Number),i),this.trigger("actionComplete",{items:n,eventName:this.toolbarAction})),s&&this.list.focus(),i=i||l.length;for(var h=0;h<e.listData.length;h++)l.splice(i+h,0,e.listData[h]);for(h=0;h<e.jsonData.length;h++)a.splice(i+h,0,e.jsonData[h]);var d=[].slice.call(e.liCollections),p=[].slice.call(t.liCollections);if(e.liCollections=[],e.value=[],i){var u=p.splice(0,i);t.liCollections=u.concat(d).concat(p)}else t.liCollections=p.concat(d);l=l.filter((function(e){return!0!==e.isHeader})),t.listData=l,t.jsonData=a,e.listData=e.sortedData=e.jsonData=[],o?(t.ulElement.innerHTML=t.renderItems(l,t.fields).innerHTML,this.trigger("actionComplete",{items:n,eventName:this.toolbarAction})):t.sortedData=l,e.updateSelectedOptions(),0===e.listData.length&&e.l10nUpdate()}},t.prototype.changeData=function(e,t,s,i){var l=[].slice.call(this.listData),a=[].slice.call(this.jsonData),o=[].slice.call(this.sortedData),n=Array.prototype.indexOf.call(this.jsonData,this.getDataByElems([i])[0]),r=Array.prototype.indexOf.call(this.sortedData,this.getDataByElems([i])[0]),c=[].slice.call(this.liCollections);l.splice(t,0,l.splice(e,1)[0]),a.splice(s,0,a.splice(n,1)[0]),o.splice(t,0,o.splice(r,1)[0]),c.splice(t,0,c.splice(e,1)[0]),this.listData=l,this.jsonData=a,this.liCollections=c,this.sortedData=o},t.prototype.getSelectedItems=function(){var e=[];return this.selectionSettings.showCheckbox?[].slice.call(this.ulElement.getElementsByClassName("e-check")).forEach((function(t){e.push(sf.base.closest(t,".e-list-item"))})):e=[].slice.call(this.ulElement.getElementsByClassName(sf.lists.cssClass.selected)),e},t.prototype.getScopedListBox=function(){var e,t=this;return this.scope&&[].slice.call(document.querySelectorAll(this.scope)).forEach((function(s){sf.base.getComponent(s,t.getModuleName())&&(e=sf.base.getComponent(s,t.getModuleName()))})),e},t.prototype.getDragArgs=function(e,t){var s=this.getSelectedItems();return s.length?(s.pop(),t&&s.push(e.target)):s=[e.target],sf.base.isBlazor()?{elements:s,items:this.getDataByElems(s),bindEvents:e.bindEvents,dragElement:e.dragElement}:{elements:s,items:this.getDataByElems(s)}},t.prototype.onKeyDown=function(e){this.keyDownHandler(e),event.stopPropagation()},t.prototype.keyDownHandler=function(e){if([32,35,36,37,38,39,40,65].indexOf(e.keyCode)>-1&&!this.allowFiltering)if(e.preventDefault(),32===e.keyCode&&this.ulElement.children.length)this.selectHandler({target:this.ulElement.getElementsByClassName("e-focused")[0],ctrlKey:e.ctrlKey,shiftKey:e.shiftKey});else if(65===e.keyCode&&e.ctrlKey)this.selectAll();else if((38===e.keyCode||40===e.keyCode)&&e.ctrlKey&&e.shiftKey)this.moveUpDown(38===e.keyCode,!0);else if(!this.toolbarSettings.items.length&&!this.tBListBox||39!==e.keyCode&&37!==e.keyCode||!e.ctrlKey)37!==e.keyCode&&39!==e.keyCode&&this.upDownKeyHandler(e);else{var t=this.tBListBox||this.getScopedListBox();39===e.keyCode?e.shiftKey?this.moveAllData(this,t,!0):this.moveData(this,t,!0):e.shiftKey?this.moveAllData(t,this,!0):this.moveData(t,this,!0)}else this.allowFiltering&&(40!==e.keyCode&&38!==e.keyCode||this.upDownKeyHandler(e))},t.prototype.upDownKeyHandler=function(e){var t=this.ulElement,s=40===e.keyCode||36===e.keyCode?0:t.childElementCount-1,i=t.getElementsByClassName("e-focused")[0]||t.getElementsByClassName(sf.lists.cssClass.selected)[0];if(i){if(35!==e.keyCode&&36!==e.keyCode&&(s=Array.prototype.indexOf.call(t.children,i),40===e.keyCode?s++:s--,s<0||s>t.childElementCount-1))return;sf.base.removeClass([i],"e-focused")}var l=t.children[s];if(l){if(-1===(s=this.getValidIndex(l,s,e.keyCode)))return void sf.base.addClass([i],"e-focused");t.children[s].focus(),t.children[s].classList.add("e-focused"),e.ctrlKey||this.selectHandler({target:t.children[s],ctrlKey:e.ctrlKey,shiftKey:e.shiftKey},!0)}},t.prototype.KeyUp=function(e){var t=this,s=String.fromCharCode(e.keyCode).match(/\w/);if(sf.base.isNullOrUndefined(s)||(this.isValidKey=!0),this.isValidKey=8===e.keyCode||this.isValidKey,this.isValidKey&&(this.isValidKey=!1,e.keyCode,this.targetElement(),e.keyCode,this.allowFiltering)){var i={preventDefaultAction:!1,text:this.targetElement(),updateData:function(e,s,l){i.cancel||(t.isFiltered=!0,t.remoteFilterAction=!0,t.dataUpdater(e,s,l))},event:e,cancel:!1};this.trigger("filtering",i,(function(e){t.isDataFetched=!1,i.cancel||""!==t.filterInput.value&&t.isFiltered||(i.cancel||t.isCustomFiltering||i.preventDefaultAction||(t.inputString=t.filterInput.value,t.filteringAction(t.jsonData,new sf.data.Query,t.fields)),t.isFiltered||t.isCustomFiltering||i.preventDefaultAction||t.dataUpdater(t.jsonData,new sf.data.Query,t.fields))}))}},t.prototype.filter=function(e,t,s){this.isCustomFiltering=!0,this.filteringAction(e,t,s)},t.prototype.filteringAction=function(e,t,s){this.resetList(e,s,t)},t.prototype.targetElement=function(){return this.targetInputElement=this.list.getElementsByClassName("e-input-filter")[0],this.targetInputElement.value},t.prototype.dataUpdater=function(e,t,s){if(this.isDataFetched=!1,""===this.targetElement().trim()){var i=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.remoteCustomValue=!1,this.onActionComplete(i,this.jsonData),this.notify("reOrder",{module:"CheckBoxSelection",enable:this.selectionSettings.showCheckbox,e:this})}else this.resetList(e,s,t)},t.prototype.focusOutHandler=function(){var e=this.list.getElementsByClassName("e-focused")[0];e&&e.classList.remove("e-focused"),this.allowFiltering&&this.refreshClearIcon()},t.prototype.getValidIndex=function(e,t,s){var i=this.ulElement;return(e.classList.contains("e-disabled")||e.classList.contains(sf.lists.cssClass.group))&&(40===s||36===s?t++:t--),t<0||t===i.childElementCount?-1:(((e=i.querySelectorAll(".e-list-item")[t]).classList.contains("e-disabled")||e.classList.contains(sf.lists.cssClass.group))&&(t=this.getValidIndex(e,t,s)),t)},t.prototype.updateSelectedOptions=function(){var e=this,t=[],s=[];if(sf.base.extend(s,this.value),this.getSelectedItems().forEach((function(s){s.classList.contains("e-grabbed")||t.push(e.getFormattedValue(s.getAttribute("data-value")))})),this.mainList.childElementCount===this.ulElement.childElementCount)if(this.allowFiltering&&this.selectionSettings.showCheckbox){for(var i=0;i<t.length;i++)s.indexOf(t[i])>-1||s.push(t[i]);this.setProperties({value:s},!0)}else this.setProperties({value:t},!0);this.updateSelectTag(),this.updateToolBarState(),this.tBListBox&&this.tBListBox.updateToolBarState()},t.prototype.clearSelection=function(e){var t,s=this;void 0===e&&(e=this.value),this.selectionSettings.showCheckbox&&this.getSelectedItems().forEach((function(i){t=s.getFormattedValue(i.getAttribute("data-value")),e.indexOf(t)<0&&(i.getElementsByClassName("e-check")[0].classList.remove("e-check"),i.getElementsByClassName("e-checkbox-wrapper")[0].removeAttribute("aria-checked"),i.removeAttribute("aria-selected"))}))},t.prototype.setSelection=function(e,t,s){var i,l,a=this;void 0===e&&(e=this.value),void 0===t&&(t=!0),void 0===s&&(s=!1),e&&e.forEach((function(e){(i=a.list.querySelector('[data-value="'+(s?a.getValueByText(e):e)+'"]'))&&(l=a.selectionSettings.showCheckbox?i.getElementsByClassName("e-frame")[0].classList.contains("e-check"):i.classList.contains("e-selected"),(!t&&l||t&&!l&&i)&&(a.selectionSettings.showCheckbox?a.notify("updatelist",{li:i,module:"listbox"}):t?(i.classList.add(sf.lists.cssClass.selected),i.setAttribute("aria-selected","true")):(i.classList.remove(sf.lists.cssClass.selected),i.removeAttribute("aria-selected"))))})),this.updateSelectTag()},t.prototype.updateSelectTag=function(){var e=this.getSelectTag(),t="";if(e.innerHTML="",this.value){for(var s=0,i=this.value.length;s<i;s++)t+='<option selected value="'+this.value[s]+'"></option>';e.innerHTML+=t}this.checkSelectAll()},t.prototype.updateToolBarState=function(){var e=this;if(this.toolbarSettings.items.length){var t=this.getScopedListBox(),s=this.list.parentElement.getElementsByClassName("e-listbox-tool")[0];this.toolbarSettings.items.forEach((function(i){var l=s.querySelector('[data-value="'+i+'"]');switch(i){case"moveAllTo":l.disabled=!e.ulElement.childElementCount;break;case"moveAllFrom":l.disabled=!t.ulElement.childElementCount;break;case"moveFrom":l.disabled=!t.value||!t.value.length;break;case"moveUp":l.disabled=!(e.value&&e.value.length&&!e.isSelected(e.ulElement.children[0]));break;case"moveDown":l.disabled=!(e.value&&e.value.length&&!e.isSelected(e.ulElement.children[e.ulElement.childElementCount-1]));break;default:l.disabled=!e.value||!e.value.length}}))}},t.prototype.setCheckboxPosition=function(){var e=this.list;this.initLoad||"Left"!==this.selectionSettings.checkboxPosition||e.classList.remove("e-right"),"Right"===this.selectionSettings.checkboxPosition&&e.classList.add("e-right")},t.prototype.showCheckbox=function(e){var t=0,s=this.list.lastElementChild.querySelectorAll("li"),i=this.list.lastElementChild.getElementsByClassName("e-list-item").length;if(e){if(this.ulElement=this.renderItems(this.listData,this.fields),this.mainList=this.ulElement,this.list.removeChild(this.list.getElementsByTagName("ul")[0]),this.list.appendChild(this.ulElement),this.selectionSettings.showSelectAll&&!this.list.getElementsByClassName("e-selectall-parent")[0]){var l=new sf.base.L10n(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.showSelectAll=!0,this.selectAllText=l.getConstant("selectAllText"),this.unSelectAllText=l.getConstant("unSelectAllText"),this.popupWrapper=this.list,this.checkBoxSelectionModule.checkAllParent=null,this.notify("selectAll",{}),this.checkSelectAll()}}else{for(this.list.getElementsByClassName("e-selectall-parent")[0]&&this.list.removeChild(this.list.getElementsByClassName("e-selectall-parent")[0]);t<i;t++)s[t].classList.contains("e-list-item")&&s[t].removeChild(s[t].getElementsByClassName("e-checkbox-wrapper")[0]),s[t].hasAttribute("aria-selected")&&s[t].removeAttribute("aria-selected");this.mainList=this.ulElement}this.value=[]},t.prototype.isSelected=function(e){return!sf.base.isNullOrUndefined(e)&&(e.classList.contains(sf.lists.cssClass.selected)||null!==e.querySelector(".e-check"))},t.prototype.getSelectTag=function(){return this.list.getElementsByClassName("e-hidden-select")[0]},t.prototype.getToolElem=function(){return this.list.parentElement.getElementsByClassName("e-listbox-tool")[0]},t.prototype.formResetHandler=function(){this.value=this.initialSelectedOptions},t.prototype.getModuleName=function(){return"listbox"},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.getLocaleName=function(){return"listbox"},t.prototype.destroy=function(){this.itemTemplate&&sf.base.resetBlazorTemplate(this.element.id+"ItemTemplate","ItemTemplate"),this.unwireEvents(),"EJS-LISTBOX"===this.element.tagName?this.element.innerHTML="":(!sf.base.isBlazor()||sf.base.isBlazor()&&!this.isServerRendered)&&(this.element.style.display="inline-block",this.toolbarSettings.items.length&&(this.list.parentElement.parentElement.insertBefore(this.list,this.list.parentElement),sf.base.detach(this.list.nextElementSibling)),this.list.parentElement.insertBefore(this.element,this.list)),(!sf.base.isBlazor()||sf.base.isBlazor()&&!this.isServerRendered)&&e.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(t,s){var i=this.toolbarSettings.items.length?this.list.parentElement:this.list;e.prototype.onPropertyChanged.call(this,t,s),this.setUpdateInitial(["fields","query","dataSource"],t);for(var l=0,a=Object.keys(t);l<a.length;l++)switch(a[l]){case"cssClass":s.cssClass&&sf.base.removeClass([i],s.cssClass.split(" ")),t.cssClass&&sf.base.addClass([i],t.cssClass.split(" "));break;case"enableRtl":t.enableRtl?i.classList.add("e-rtl"):i.classList.remove("e-rtl");break;case"value":sf.base.removeClass(this.list.querySelectorAll("."+sf.lists.cssClass.selected),sf.lists.cssClass.selected),this.clearSelection(this.value),this.setSelection();break;case"height":this.setHeight();break;case"enabled":this.setEnable();break;case"allowDragAndDrop":t.allowDragAndDrop?this.initDraggable():sf.base.getComponent(this.ulElement,"sortable").destroy();break;case"allowFiltering":this.allowFiltering?this.setFiltering():(this.list.removeChild(this.list.getElementsByClassName("e-filter-parent")[0]),this.filterParent=null,sf.base.removeClass([this.list],"e-filter-list"));break;case"filterBarPlaceholder":this.allowFiltering&&this.filterInput&&sf.inputs.Input.setPlaceholder(t.filterBarPlaceholder,this.filterInput);break;case"scope":this.allowDragAndDrop&&(sf.base.getComponent(this.ulElement,"sortable").scope=t.scope),this.toolbarSettings.items.length&&(s.scope&&(sf.base.getComponent(document.querySelector(s.scope),this.getModuleName()).tBListBox=null),t.scope&&(sf.base.getComponent(document.querySelector(t.scope),this.getModuleName()).tBListBox=this));break;case"toolbarSettings":var o=void 0,n=t.toolbarSettings.position,r=this.getToolElem();n&&(sf.base.removeClass([i],["e-right","e-left"]),i.classList.add("e-"+n.toLowerCase()),"Left"===n?i.insertBefore(r,this.list):i.appendChild(r)),t.toolbarSettings.items&&(s.toolbarSettings.items.length&&((o=this.list.parentElement).parentElement.insertBefore(this.list,o),sf.base.detach(o)),this.initToolbarAndStyles(),this.wireToolbarEvent());break;case"selectionSettings":var c=t.selectionSettings.showSelectAll,h=t.selectionSettings.showCheckbox;if(!sf.base.isNullOrUndefined(c)){if(this.showSelectAll=c,this.showSelectAll){var d=new sf.base.L10n(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.checkBoxSelectionModule.checkAllParent=null,this.showSelectAll=!0,this.selectAllText=d.getConstant("selectAllText"),this.unSelectAllText=d.getConstant("selectAllText"),this.popupWrapper=this.list}this.notify("selectAll",{}),this.checkSelectAll()}sf.base.isNullOrUndefined(h)||this.showCheckbox(h),this.selectionSettings.showCheckbox&&this.setCheckboxPosition();break;case"dataSource":this.jsonData=[].slice.call(this.dataSource)}},i([sf.base.Property("")],t.prototype,"cssClass",void 0),i([sf.base.Property([])],t.prototype,"value",void 0),i([sf.base.Property("")],t.prototype,"height",void 0),i([sf.base.Property(!1)],t.prototype,"allowDragAndDrop",void 0),i([sf.base.Property(1e3)],t.prototype,"maximumSelectionLength",void 0),i([sf.base.Property(!1)],t.prototype,"allowFiltering",void 0),i([sf.base.Property("")],t.prototype,"scope",void 0),i([sf.base.Property(!0)],t.prototype,"ignoreCase",void 0),i([sf.base.Property(null)],t.prototype,"filterBarPlaceholder",void 0),i([sf.base.Event()],t.prototype,"beforeItemRender",void 0),i([sf.base.Event()],t.prototype,"filtering",void 0),i([sf.base.Event()],t.prototype,"select",void 0),i([sf.base.Event()],t.prototype,"change",void 0),i([sf.base.Event()],t.prototype,"beforeDrop",void 0),i([sf.base.Event()],t.prototype,"dragStart",void 0),i([sf.base.Event()],t.prototype,"drag",void 0),i([sf.base.Event()],t.prototype,"drop",void 0),i([sf.base.Event()],t.prototype,"dataBound",void 0),i([sf.base.Property(null)],t.prototype,"groupTemplate",void 0),i([sf.base.Property("No records found")],t.prototype,"noRecordsTemplate",void 0),i([sf.base.Property("Request failed")],t.prototype,"actionFailureTemplate",void 0),i([sf.base.Property(1e3)],t.prototype,"zIndex",void 0),i([sf.base.Property(!1)],t.prototype,"ignoreAccent",void 0),i([sf.base.Complex({},o)],t.prototype,"toolbarSettings",void 0),i([sf.base.Complex({},a)],t.prototype,"selectionSettings",void 0),t=l=i([sf.base.NotifyPropertyChanges],t)}(sf.dropdowns.DropDownBase),r={backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",clearIcon:"e-clear-icon"},n.Inject(void 0),e.SelectionSettings=a,e.ToolbarSettings=o,e.ListBox=n,e))}))}}]);